
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>TMotorCANControl package &#8212; TMotorCANControl 1.1.2 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="tmotorcancontrol-package">
<h1>TMotorCANControl package<a class="headerlink" href="#tmotorcancontrol-package" title="Permalink to this headline">¶</a></h1>
<section id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</section>
<section id="module-TMotorCANControl.CAN_Manager">
<span id="tmotorcancontrol-can-manager-module"></span><h2>TMotorCANControl.CAN_Manager module<a class="headerlink" href="#module-TMotorCANControl.CAN_Manager" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="TMotorCANControl.CAN_Manager.CAN_Manager">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">TMotorCANControl.CAN_Manager.</span></span><span class="sig-name descname"><span class="pre">CAN_Manager</span></span><a class="headerlink" href="#TMotorCANControl.CAN_Manager.CAN_Manager" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>A class to manage the low level CAN communication protocols</p>
<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.CAN_Manager.CAN_Manager.MIT_controller">
<span class="sig-name descname"><span class="pre">MIT_controller</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">motor_id</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">motor_type</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">position</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">velocity</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Kp</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Kd</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">I</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.CAN_Manager.CAN_Manager.MIT_controller" title="Permalink to this definition">¶</a></dt>
<dd><p>Sends an MIT style control signal to the motor. This signal will be used to generate a
current for the field-oriented controller on the motor control chip, given by this expression:</p>
<blockquote>
<div><p>q_control = Kp*(position - current_position) + Kd*(velocity - current_velocity) + I</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>motor_id</strong> – The CAN ID of the motor to send the message to</p></li>
<li><p><strong>motor_type</strong> – A string noting the type of motor, ie ‘AK80-9’</p></li>
<li><p><strong>position</strong> – The desired position in rad</p></li>
<li><p><strong>velocity</strong> – The desired velocity in rad/s</p></li>
<li><p><strong>Kp</strong> – The position gain</p></li>
<li><p><strong>Kd</strong> – The velocity gain</p></li>
<li><p><strong>I</strong> – The additional current</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.CAN_Manager.CAN_Manager.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.CAN_Manager.CAN_Manager.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>ALl initialization happens in __new__</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.CAN_Manager.CAN_Manager.add_motor">
<span class="sig-name descname"><span class="pre">add_motor</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">motor</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.CAN_Manager.CAN_Manager.add_motor" title="Permalink to this definition">¶</a></dt>
<dd><p>Subscribe a motor object to the CAN bus to be updated upon message reception</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>motor</strong> – The TMotorManager object to be subscribed to the notifier</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="TMotorCANControl.CAN_Manager.CAN_Manager.debug">
<span class="sig-name descname"><span class="pre">debug</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">False</span></em><a class="headerlink" href="#TMotorCANControl.CAN_Manager.CAN_Manager.debug" title="Permalink to this definition">¶</a></dt>
<dd><p>Set to true to display every message sent and recieved for debugging.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.CAN_Manager.CAN_Manager.float_to_uint">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">float_to_uint</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">x_min</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">x_max</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_bits</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.CAN_Manager.CAN_Manager.float_to_uint" title="Permalink to this definition">¶</a></dt>
<dd><p>Interpolates a floating point number to an unsigned integer of num_bits length.
A number of x_max will be the largest integer of num_bits, and x_min would be 0.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x</strong> – The floating point number to convert</p></li>
<li><p><strong>x_min</strong> – The minimum value for the floating point number</p></li>
<li><p><strong>x_max</strong> – The maximum value for the floating point number</p></li>
<li><p><strong>num_bits</strong> – The number of bits for the unsigned integer</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.CAN_Manager.CAN_Manager.limit_value">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">limit_value</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.CAN_Manager.CAN_Manager.limit_value" title="Permalink to this definition">¶</a></dt>
<dd><p>Limits value to be between min and max</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>value</strong> – The value to be limited.</p></li>
<li><p><strong>min</strong> – The lowest number allowed (inclusive) for value</p></li>
<li><p><strong>max</strong> – The highest number allowed (inclusive) for value</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.CAN_Manager.CAN_Manager.parse_MIT_message">
<span class="sig-name descname"><span class="pre">parse_MIT_message</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">motor_type</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.CAN_Manager.CAN_Manager.parse_MIT_message" title="Permalink to this definition">¶</a></dt>
<dd><p>Takes a RAW MIT message and formats it into readable floating point numbers.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> – the bytes of data from a python-can message object to be parsed</p></li>
<li><p><strong>motor_type</strong> – A string noting the type of motor, ie ‘AK80-9’</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><p>An MIT_Motor_State namedtuple that contains floating point values for the
position, velocity, current, temperature, and error in rad, rad/s, amps, and <a href="#id1"><span class="problematic" id="id2">*</span></a>C.
0 means no error.</p>
<p>Notably, the current is converted to amps from the reported
‘torque’ value, which is i*Kt. This allows control based on actual q-axis current,
rather than estimated torque, which doesn’t account for friction losses.</p>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.CAN_Manager.CAN_Manager.power_off">
<span class="sig-name descname"><span class="pre">power_off</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">motor_id</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.CAN_Manager.CAN_Manager.power_off" title="Permalink to this definition">¶</a></dt>
<dd><p>Sends the power off code to motor_id.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>motor_id</strong> – The CAN ID of the motor to send the message to.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.CAN_Manager.CAN_Manager.power_on">
<span class="sig-name descname"><span class="pre">power_on</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">motor_id</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.CAN_Manager.CAN_Manager.power_on" title="Permalink to this definition">¶</a></dt>
<dd><p>Sends the power on code to motor_id.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>motor_id</strong> – The CAN ID of the motor to send the message to.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.CAN_Manager.CAN_Manager.send_MIT_message">
<span class="sig-name descname"><span class="pre">send_MIT_message</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">motor_id</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.CAN_Manager.CAN_Manager.send_MIT_message" title="Permalink to this definition">¶</a></dt>
<dd><p>Sends an MIT Mode message to the motor, with a header of motor_id and data array of data</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>motor_id</strong> – The CAN ID of the motor to send to.</p></li>
<li><p><strong>data</strong> – An array of integers or bytes of data to send.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.CAN_Manager.CAN_Manager.uint_to_float">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">uint_to_float</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">x_min</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">x_max</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_bits</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.CAN_Manager.CAN_Manager.uint_to_float" title="Permalink to this definition">¶</a></dt>
<dd><p>Interpolates an unsigned integer of num_bits length to a floating point number between x_min and x_max.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x</strong> – The floating point number to convert</p></li>
<li><p><strong>x_min</strong> – The minimum value for the floating point number</p></li>
<li><p><strong>x_max</strong> – The maximum value for the floating point number</p></li>
<li><p><strong>num_bits</strong> – The number of bits for the unsigned integer</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.CAN_Manager.CAN_Manager.zero">
<span class="sig-name descname"><span class="pre">zero</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">motor_id</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.CAN_Manager.CAN_Manager.zero" title="Permalink to this definition">¶</a></dt>
<dd><p>Sends the zeroing code to motor_id. This code will shut off communication with the motor for about a second.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>motor_id</strong> – The CAN ID of the motor to send the message to.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py data">
<dt class="sig sig-object py" id="TMotorCANControl.CAN_Manager.MIT_Params">
<span class="sig-prename descclassname"><span class="pre">TMotorCANControl.CAN_Manager.</span></span><span class="sig-name descname"><span class="pre">MIT_Params</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{'AK10-9':</span> <span class="pre">{'Current_Factor':</span> <span class="pre">0.59,</span> <span class="pre">'GEAR_RATIO':</span> <span class="pre">9.0,</span> <span class="pre">'Kd_max':</span> <span class="pre">5.0,</span> <span class="pre">'Kd_min':</span> <span class="pre">0.0,</span> <span class="pre">'Kp_max':</span> <span class="pre">500.0,</span> <span class="pre">'Kp_min':</span> <span class="pre">0.0,</span> <span class="pre">'Kt_TMotor':</span> <span class="pre">0.16,</span> <span class="pre">'Kt_actual':</span> <span class="pre">0.206,</span> <span class="pre">'P_max':</span> <span class="pre">12.5,</span> <span class="pre">'P_min':</span> <span class="pre">-12.5,</span> <span class="pre">'T_max':</span> <span class="pre">65.0,</span> <span class="pre">'T_min':</span> <span class="pre">-65.0,</span> <span class="pre">'Use_derived_torque_constants':</span> <span class="pre">False,</span> <span class="pre">'V_max':</span> <span class="pre">50.0,</span> <span class="pre">'V_min':</span> <span class="pre">-50.0},</span> <span class="pre">'AK60-6':</span> <span class="pre">{'Current_Factor':</span> <span class="pre">0.59,</span> <span class="pre">'GEAR_RATIO':</span> <span class="pre">6.0,</span> <span class="pre">'Kd_max':</span> <span class="pre">5.0,</span> <span class="pre">'Kd_min':</span> <span class="pre">0.0,</span> <span class="pre">'Kp_max':</span> <span class="pre">500.0,</span> <span class="pre">'Kp_min':</span> <span class="pre">0.0,</span> <span class="pre">'Kt_TMotor':</span> <span class="pre">0.068,</span> <span class="pre">'Kt_actual':</span> <span class="pre">0.087,</span> <span class="pre">'P_max':</span> <span class="pre">12.5,</span> <span class="pre">'P_min':</span> <span class="pre">-12.5,</span> <span class="pre">'T_max':</span> <span class="pre">15.0,</span> <span class="pre">'T_min':</span> <span class="pre">-15.0,</span> <span class="pre">'Use_derived_torque_constants':</span> <span class="pre">False,</span> <span class="pre">'V_max':</span> <span class="pre">50.0,</span> <span class="pre">'V_min':</span> <span class="pre">-50.0},</span> <span class="pre">'AK70-10':</span> <span class="pre">{'Current_Factor':</span> <span class="pre">0.59,</span> <span class="pre">'GEAR_RATIO':</span> <span class="pre">10.0,</span> <span class="pre">'Kd_max':</span> <span class="pre">5.0,</span> <span class="pre">'Kd_min':</span> <span class="pre">0.0,</span> <span class="pre">'Kp_max':</span> <span class="pre">500.0,</span> <span class="pre">'Kp_min':</span> <span class="pre">0.0,</span> <span class="pre">'Kt_TMotor':</span> <span class="pre">0.095,</span> <span class="pre">'Kt_actual':</span> <span class="pre">0.122,</span> <span class="pre">'P_max':</span> <span class="pre">12.5,</span> <span class="pre">'P_min':</span> <span class="pre">-12.5,</span> <span class="pre">'T_max':</span> <span class="pre">25.0,</span> <span class="pre">'T_min':</span> <span class="pre">-25.0,</span> <span class="pre">'Use_derived_torque_constants':</span> <span class="pre">False,</span> <span class="pre">'V_max':</span> <span class="pre">50.0,</span> <span class="pre">'V_min':</span> <span class="pre">-50.0},</span> <span class="pre">'AK80-6':</span> <span class="pre">{'Current_Factor':</span> <span class="pre">0.59,</span> <span class="pre">'GEAR_RATIO':</span> <span class="pre">6.0,</span> <span class="pre">'Kd_max':</span> <span class="pre">5.0,</span> <span class="pre">'Kd_min':</span> <span class="pre">0.0,</span> <span class="pre">'Kp_max':</span> <span class="pre">500.0,</span> <span class="pre">'Kp_min':</span> <span class="pre">0.0,</span> <span class="pre">'Kt_TMotor':</span> <span class="pre">0.091,</span> <span class="pre">'Kt_actual':</span> <span class="pre">0.017,</span> <span class="pre">'P_max':</span> <span class="pre">12.5,</span> <span class="pre">'P_min':</span> <span class="pre">-12.5,</span> <span class="pre">'T_max':</span> <span class="pre">12.0,</span> <span class="pre">'T_min':</span> <span class="pre">-12.0,</span> <span class="pre">'Use_derived_torque_constants':</span> <span class="pre">False,</span> <span class="pre">'V_max':</span> <span class="pre">76.0,</span> <span class="pre">'V_min':</span> <span class="pre">-76.0},</span> <span class="pre">'AK80-64':</span> <span class="pre">{'Current_Factor':</span> <span class="pre">0.59,</span> <span class="pre">'GEAR_RATIO':</span> <span class="pre">80.0,</span> <span class="pre">'Kd_max':</span> <span class="pre">5.0,</span> <span class="pre">'Kd_min':</span> <span class="pre">0.0,</span> <span class="pre">'Kp_max':</span> <span class="pre">500.0,</span> <span class="pre">'Kp_min':</span> <span class="pre">0.0,</span> <span class="pre">'Kt_TMotor':</span> <span class="pre">0.119,</span> <span class="pre">'Kt_actual':</span> <span class="pre">0.153,</span> <span class="pre">'P_max':</span> <span class="pre">12.5,</span> <span class="pre">'P_min':</span> <span class="pre">-12.5,</span> <span class="pre">'T_max':</span> <span class="pre">144.0,</span> <span class="pre">'T_min':</span> <span class="pre">-144.0,</span> <span class="pre">'Use_derived_torque_constants':</span> <span class="pre">False,</span> <span class="pre">'V_max':</span> <span class="pre">8.0,</span> <span class="pre">'V_min':</span> <span class="pre">-8.0},</span> <span class="pre">'AK80-9':</span> <span class="pre">{'Current_Factor':</span> <span class="pre">0.59,</span> <span class="pre">'GEAR_RATIO':</span> <span class="pre">9.0,</span> <span class="pre">'Kd_max':</span> <span class="pre">5.0,</span> <span class="pre">'Kd_min':</span> <span class="pre">0.0,</span> <span class="pre">'Kp_max':</span> <span class="pre">500.0,</span> <span class="pre">'Kp_min':</span> <span class="pre">0.0,</span> <span class="pre">'Kt_TMotor':</span> <span class="pre">0.091,</span> <span class="pre">'Kt_actual':</span> <span class="pre">0.115,</span> <span class="pre">'P_max':</span> <span class="pre">12.5,</span> <span class="pre">'P_min':</span> <span class="pre">-12.5,</span> <span class="pre">'T_max':</span> <span class="pre">18.0,</span> <span class="pre">'T_min':</span> <span class="pre">-18.0,</span> <span class="pre">'Use_derived_torque_constants':</span> <span class="pre">True,</span> <span class="pre">'V_max':</span> <span class="pre">50.0,</span> <span class="pre">'V_min':</span> <span class="pre">-50.0,</span> <span class="pre">'a_hat':</span> <span class="pre">[0.0,</span> <span class="pre">1.15605006,</span> <span class="pre">0.000417389589,</span> <span class="pre">0.268556072,</span> <span class="pre">0.049042414]},</span> <span class="pre">'ERROR_CODES':</span> <span class="pre">{0:</span> <span class="pre">'No</span> <span class="pre">Error',</span> <span class="pre">1:</span> <span class="pre">'Over</span> <span class="pre">temperature</span> <span class="pre">fault',</span> <span class="pre">2:</span> <span class="pre">'Over</span> <span class="pre">current</span> <span class="pre">fault',</span> <span class="pre">3:</span> <span class="pre">'Over</span> <span class="pre">voltage</span> <span class="pre">fault',</span> <span class="pre">4:</span> <span class="pre">'Under</span> <span class="pre">voltage</span> <span class="pre">fault',</span> <span class="pre">5:</span> <span class="pre">'Encoder</span> <span class="pre">fault',</span> <span class="pre">6:</span> <span class="pre">'Phase</span> <span class="pre">current</span> <span class="pre">unbalance</span> <span class="pre">fault</span> <span class="pre">(The</span> <span class="pre">hardware</span> <span class="pre">may</span> <span class="pre">be</span> <span class="pre">damaged)'}}</span></em><a class="headerlink" href="#TMotorCANControl.CAN_Manager.MIT_Params" title="Permalink to this definition">¶</a></dt>
<dd><p>A Dictionary containing the parameters of each type of motor, as well as the error
code definitions for the AK-series TMotor actuators.
You could use an optional torque model that accounts for friction losses if one is available.
So far, such a model is only available for the AK80-9.</p>
<dl class="simple">
<dt>This model comes from a linear regression with the following constants:</dt><dd><ul class="simple">
<li><p>a_hat[0] = bias</p></li>
<li><p>a_hat[1] = standard torque constant multiplier</p></li>
<li><p>a_hat[2] = nonlinear torque constant multiplier</p></li>
<li><p>a_hat[3] = coloumb friction</p></li>
<li><p>a_hat[4] = gearbox friction</p></li>
</ul>
</dd>
</dl>
<p>The model has the form:
τ = a_hat[0] + gr*(a_hat[1]*kt - a_hat[2]*abs(i))*i - (v/(ϵ + np.abs(v)) )*(a_hat[3] + a_hat[4]*np.abs(i))</p>
<dl class="simple">
<dt>with the following values:</dt><dd><ul class="simple">
<li><p>τ = approximated torque</p></li>
<li><p>gr = gear ratio</p></li>
<li><p>kt = nominal torque constant</p></li>
<li><p>i = current</p></li>
<li><p>v = velocity</p></li>
<li><p>ϵ = signum velocity threshold</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="TMotorCANControl.CAN_Manager.MIT_command">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">TMotorCANControl.CAN_Manager.</span></span><span class="sig-name descname"><span class="pre">MIT_command</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">position</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">velocity</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">kp</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">kd</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">current</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.CAN_Manager.MIT_command" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Data structure to store MIT_command that will be sent upon update</p>
<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.CAN_Manager.MIT_command.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">position</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">velocity</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">kp</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">kd</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">current</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.CAN_Manager.MIT_command.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the motor state to the input.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>position</strong> – Position in rad</p></li>
<li><p><strong>velocity</strong> – Velocity in rad/s</p></li>
<li><p><strong>kp</strong> – Position gain</p></li>
<li><p><strong>kd</strong> – Velocity gain</p></li>
<li><p><strong>current</strong> – Current in amps</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="TMotorCANControl.CAN_Manager.MIT_motor_state">
<span class="sig-prename descclassname"><span class="pre">TMotorCANControl.CAN_Manager.</span></span><span class="sig-name descname"><span class="pre">MIT_motor_state</span></span><a class="headerlink" href="#TMotorCANControl.CAN_Manager.MIT_motor_state" title="Permalink to this definition">¶</a></dt>
<dd><p>Motor state from the controller, uneditable named tuple</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="TMotorCANControl.CAN_Manager.motorListener">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">TMotorCANControl.CAN_Manager.</span></span><span class="sig-name descname"><span class="pre">motorListener</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">canman</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">motor</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.CAN_Manager.motorListener" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">can.listener.Listener</span></code></p>
<p>Python-can listener object, with handler to be called upon reception of a message on the CAN bus</p>
<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.CAN_Manager.motorListener.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">canman</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">motor</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.CAN_Manager.motorListener.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets stores can manager and motor object references</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>canman</strong> – The CanManager object to get messages from</p></li>
<li><p><strong>motor</strong> – The TMotorCANManager object to update</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.CAN_Manager.motorListener.on_message_received">
<span class="sig-name descname"><span class="pre">on_message_received</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">msg</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.CAN_Manager.motorListener.on_message_received" title="Permalink to this definition">¶</a></dt>
<dd><p>Updates this listener’s motor with the info contained in msg, if that message was for this motor.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>msg</strong> – A python-can CAN message</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="TMotorCANControl.CAN_Manager.motor_state">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">TMotorCANControl.CAN_Manager.</span></span><span class="sig-name descname"><span class="pre">motor_state</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">position</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">velocity</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">current</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">temperature</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">error</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">acceleration</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.CAN_Manager.motor_state" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Data structure to store and update motor states</p>
<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.CAN_Manager.motor_state.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">position</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">velocity</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">current</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">temperature</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">error</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">acceleration</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.CAN_Manager.motor_state.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the motor state to the input.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>position</strong> – Position in rad</p></li>
<li><p><strong>velocity</strong> – Velocity in rad/s</p></li>
<li><p><strong>current</strong> – current in amps</p></li>
<li><p><strong>temperature</strong> – temperature in degrees C</p></li>
<li><p><strong>error</strong> – error code, 0 means no error</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.CAN_Manager.motor_state.set_state">
<span class="sig-name descname"><span class="pre">set_state</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">position</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">velocity</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">current</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">temperature</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">error</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">acceleration</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.CAN_Manager.motor_state.set_state" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the motor state to the input.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>position</strong> – Position in rad</p></li>
<li><p><strong>velocity</strong> – Velocity in rad/s</p></li>
<li><p><strong>current</strong> – current in amps</p></li>
<li><p><strong>temperature</strong> – temperature in degrees C</p></li>
<li><p><strong>error</strong> – error code, 0 means no error</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.CAN_Manager.motor_state.set_state_obj">
<span class="sig-name descname"><span class="pre">set_state_obj</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">other_motor_state</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.CAN_Manager.motor_state.set_state_obj" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets this motor state object’s values to those of another motor state object.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>other_motor_state</strong> – The other motor state object with values to set this motor state object’s values to.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="module-TMotorCANControl.CAN_manager_servo">
<span id="tmotorcancontrol-can-manager-servo-module"></span><h2>TMotorCANControl.CAN_manager_servo module<a class="headerlink" href="#module-TMotorCANControl.CAN_manager_servo" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="TMotorCANControl.CAN_manager_servo.CAN_Manager_servo">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">TMotorCANControl.CAN_manager_servo.</span></span><span class="sig-name descname"><span class="pre">CAN_Manager_servo</span></span><a class="headerlink" href="#TMotorCANControl.CAN_manager_servo.CAN_Manager_servo" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>A class to manage the low level CAN communication protocols</p>
<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.CAN_manager_servo.CAN_Manager_servo.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.CAN_manager_servo.CAN_Manager_servo.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>ALl initialization happens in __new__</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.CAN_manager_servo.CAN_Manager_servo.add_motor">
<span class="sig-name descname"><span class="pre">add_motor</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">motor</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.CAN_manager_servo.CAN_Manager_servo.add_motor" title="Permalink to this definition">¶</a></dt>
<dd><p>Subscribe a motor object to the CAN bus to be updated upon message reception</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>motor</strong> – The TMotorManager object to be subscribed to the notifier</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.CAN_manager_servo.CAN_Manager_servo.buffer_append_int16">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">buffer_append_int16</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">buffer</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">number</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">index</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.CAN_manager_servo.CAN_Manager_servo.buffer_append_int16" title="Permalink to this definition">¶</a></dt>
<dd><p>buffer size for int 16</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>Buffer</strong> – memory allocated to store data.</p></li>
<li><p><strong>number</strong> – value.</p></li>
<li><p><strong>index</strong> – Size of the buffer.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.CAN_manager_servo.CAN_Manager_servo.buffer_append_int32">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">buffer_append_int32</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">buffer</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">number</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">index</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.CAN_manager_servo.CAN_Manager_servo.buffer_append_int32" title="Permalink to this definition">¶</a></dt>
<dd><p>buffer size for int 32</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>Buffer</strong> – memory allocated to store data.</p></li>
<li><p><strong>number</strong> – value.</p></li>
<li><p><strong>index</strong> – Size of the buffer.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.CAN_manager_servo.CAN_Manager_servo.buffer_append_int64">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">buffer_append_int64</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">buffer</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">number</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">index</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.CAN_manager_servo.CAN_Manager_servo.buffer_append_int64" title="Permalink to this definition">¶</a></dt>
<dd><p>buffer size for int 64</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>Buffer</strong> – memory allocated to store data.</p></li>
<li><p><strong>number</strong> – value.</p></li>
<li><p><strong>index</strong> – Size of the buffer.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.CAN_manager_servo.CAN_Manager_servo.buffer_append_uint16">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">buffer_append_uint16</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">buffer</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">number</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">index</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.CAN_manager_servo.CAN_Manager_servo.buffer_append_uint16" title="Permalink to this definition">¶</a></dt>
<dd><p>buffer size for Uint 16</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>Buffer</strong> – memory allocated to store data.</p></li>
<li><p><strong>number</strong> – value.</p></li>
<li><p><strong>index</strong> – Size of the buffer.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.CAN_manager_servo.CAN_Manager_servo.buffer_append_uint32">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">buffer_append_uint32</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">buffer</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">number</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">index</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.CAN_manager_servo.CAN_Manager_servo.buffer_append_uint32" title="Permalink to this definition">¶</a></dt>
<dd><p>buffer size for uint 32</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>Buffer</strong> – memory allocated to store data.</p></li>
<li><p><strong>number</strong> – value.</p></li>
<li><p><strong>index</strong> – Size of the buffer.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.CAN_manager_servo.CAN_Manager_servo.buffer_append_uint64">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">buffer_append_uint64</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">buffer</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">number</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">index</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.CAN_manager_servo.CAN_Manager_servo.buffer_append_uint64" title="Permalink to this definition">¶</a></dt>
<dd><p>buffer size for uint 64</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>Buffer</strong> – memory allocated to store data.</p></li>
<li><p><strong>number</strong> – value.</p></li>
<li><p><strong>index</strong> – Size of the buffer.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.CAN_manager_servo.CAN_Manager_servo.comm_can_set_cb">
<span class="sig-name descname"><span class="pre">comm_can_set_cb</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">controller_id</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">current</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.CAN_manager_servo.CAN_Manager_servo.comm_can_set_cb" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.CAN_manager_servo.CAN_Manager_servo.comm_can_set_current">
<span class="sig-name descname"><span class="pre">comm_can_set_current</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">controller_id</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">current</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.CAN_manager_servo.CAN_Manager_servo.comm_can_set_current" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.CAN_manager_servo.CAN_Manager_servo.comm_can_set_duty">
<span class="sig-name descname"><span class="pre">comm_can_set_duty</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">controller_id</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">duty</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.CAN_manager_servo.CAN_Manager_servo.comm_can_set_duty" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.CAN_manager_servo.CAN_Manager_servo.comm_can_set_origin">
<span class="sig-name descname"><span class="pre">comm_can_set_origin</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">controller_id</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">set_origin_mode</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.CAN_manager_servo.CAN_Manager_servo.comm_can_set_origin" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.CAN_manager_servo.CAN_Manager_servo.comm_can_set_pos">
<span class="sig-name descname"><span class="pre">comm_can_set_pos</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">controller_id</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pos</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.CAN_manager_servo.CAN_Manager_servo.comm_can_set_pos" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.CAN_manager_servo.CAN_Manager_servo.comm_can_set_pos_spd">
<span class="sig-name descname"><span class="pre">comm_can_set_pos_spd</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">controller_id</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pos</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">spd</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">RPA</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.CAN_manager_servo.CAN_Manager_servo.comm_can_set_pos_spd" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.CAN_manager_servo.CAN_Manager_servo.comm_can_set_rpm">
<span class="sig-name descname"><span class="pre">comm_can_set_rpm</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">controller_id</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rpm</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.CAN_manager_servo.CAN_Manager_servo.comm_can_set_rpm" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.CAN_manager_servo.CAN_Manager_servo.crc16">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">crc16</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">buf</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">len</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.CAN_manager_servo.CAN_Manager_servo.crc16" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="TMotorCANControl.CAN_manager_servo.CAN_Manager_servo.debug">
<span class="sig-name descname"><span class="pre">debug</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">False</span></em><a class="headerlink" href="#TMotorCANControl.CAN_manager_servo.CAN_Manager_servo.debug" title="Permalink to this definition">¶</a></dt>
<dd><p>Set to true to display every message sent and recieved for debugging.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.CAN_manager_servo.CAN_Manager_servo.parse_servo_message">
<span class="sig-name descname"><span class="pre">parse_servo_message</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.CAN_manager_servo.CAN_Manager_servo.parse_servo_message" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.CAN_manager_servo.CAN_Manager_servo.power_off">
<span class="sig-name descname"><span class="pre">power_off</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">motor_id</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.CAN_manager_servo.CAN_Manager_servo.power_off" title="Permalink to this definition">¶</a></dt>
<dd><p>Sends the power off code to motor_id.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>motor_id</strong> – The CAN ID of the motor to send the message to.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.CAN_manager_servo.CAN_Manager_servo.power_on">
<span class="sig-name descname"><span class="pre">power_on</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">motor_id</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.CAN_manager_servo.CAN_Manager_servo.power_on" title="Permalink to this definition">¶</a></dt>
<dd><p>Sends the power on code to motor_id.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>motor_id</strong> – The CAN ID of the motor to send the message to.</p></li>
<li><p><strong>Data</strong> – This is obtained from the datasheet.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.CAN_manager_servo.CAN_Manager_servo.send_servo_message">
<span class="sig-name descname"><span class="pre">send_servo_message</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">motor_id</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_len</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.CAN_manager_servo.CAN_Manager_servo.send_servo_message" title="Permalink to this definition">¶</a></dt>
<dd><p>Sends a Servo Mode message to the motor, with a header of motor_id and data array of data</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>motor_id</strong> – The CAN ID of the motor to send to.</p></li>
<li><p><strong>data</strong> – An array of integers or bytes of data to send.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py data">
<dt class="sig sig-object py" id="TMotorCANControl.CAN_manager_servo.Servo_Params">
<span class="sig-prename descclassname"><span class="pre">TMotorCANControl.CAN_manager_servo.</span></span><span class="sig-name descname"><span class="pre">Servo_Params</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{'AK10-9':</span> <span class="pre">{'Curr_max':</span> <span class="pre">1500,</span> <span class="pre">'Curr_min':</span> <span class="pre">-1500,</span> <span class="pre">'Current_Factor':</span> <span class="pre">0.59,</span> <span class="pre">'GEAR_RATIO':</span> <span class="pre">9.0,</span> <span class="pre">'Kt_TMotor':</span> <span class="pre">0.16,</span> <span class="pre">'Kt_actual':</span> <span class="pre">0.206,</span> <span class="pre">'P_max':</span> <span class="pre">32000,</span> <span class="pre">'P_min':</span> <span class="pre">-32000,</span> <span class="pre">'T_max':</span> <span class="pre">15,</span> <span class="pre">'T_min':</span> <span class="pre">-15,</span> <span class="pre">'Use_derived_torque_constants':</span> <span class="pre">False,</span> <span class="pre">'V_max':</span> <span class="pre">100000,</span> <span class="pre">'V_min':</span> <span class="pre">-100000},</span> <span class="pre">'AK80-9':</span> <span class="pre">{'Curr_max':</span> <span class="pre">1500,</span> <span class="pre">'Curr_min':</span> <span class="pre">-1500,</span> <span class="pre">'Current_Factor':</span> <span class="pre">0.59,</span> <span class="pre">'GEAR_RATIO':</span> <span class="pre">9.0,</span> <span class="pre">'Kt_TMotor':</span> <span class="pre">0.091,</span> <span class="pre">'Kt_actual':</span> <span class="pre">0.115,</span> <span class="pre">'P_max':</span> <span class="pre">32000,</span> <span class="pre">'P_min':</span> <span class="pre">-32000,</span> <span class="pre">'T_max':</span> <span class="pre">30,</span> <span class="pre">'T_min':</span> <span class="pre">-30,</span> <span class="pre">'Use_derived_torque_constants':</span> <span class="pre">False,</span> <span class="pre">'V_max':</span> <span class="pre">32000,</span> <span class="pre">'V_min':</span> <span class="pre">-32000},</span> <span class="pre">'CAN_PACKET_ID':</span> <span class="pre">{'CAN_PACKET_SET_CURRENT':</span> <span class="pre">1,</span> <span class="pre">'CAN_PACKET_SET_CURRENT_BRAKE':</span> <span class="pre">2,</span> <span class="pre">'CAN_PACKET_SET_DUTY':</span> <span class="pre">0,</span> <span class="pre">'CAN_PACKET_SET_ORIGIN_HERE':</span> <span class="pre">5,</span> <span class="pre">'CAN_PACKET_SET_POS':</span> <span class="pre">4,</span> <span class="pre">'CAN_PACKET_SET_POS_SPD':</span> <span class="pre">6,</span> <span class="pre">'CAN_PACKET_SET_RPM':</span> <span class="pre">3},</span> <span class="pre">'ERROR_CODES':</span> <span class="pre">{0:</span> <span class="pre">'No</span> <span class="pre">Error',</span> <span class="pre">1:</span> <span class="pre">'Over</span> <span class="pre">temperature</span> <span class="pre">fault',</span> <span class="pre">2:</span> <span class="pre">'Over</span> <span class="pre">current</span> <span class="pre">fault',</span> <span class="pre">3:</span> <span class="pre">'Over</span> <span class="pre">voltage</span> <span class="pre">fault',</span> <span class="pre">4:</span> <span class="pre">'Under</span> <span class="pre">voltage</span> <span class="pre">fault',</span> <span class="pre">5:</span> <span class="pre">'Encoder</span> <span class="pre">fault',</span> <span class="pre">6:</span> <span class="pre">'Phase</span> <span class="pre">current</span> <span class="pre">unbalance</span> <span class="pre">fault</span> <span class="pre">(The</span> <span class="pre">hardware</span> <span class="pre">may</span> <span class="pre">be</span> <span class="pre">damaged)'}}</span></em><a class="headerlink" href="#TMotorCANControl.CAN_manager_servo.Servo_Params" title="Permalink to this definition">¶</a></dt>
<dd><p>A dictionary with the parameters needed to control the motor</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="TMotorCANControl.CAN_manager_servo.motorListener">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">TMotorCANControl.CAN_manager_servo.</span></span><span class="sig-name descname"><span class="pre">motorListener</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">canman</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">motor</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.CAN_manager_servo.motorListener" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">can.listener.Listener</span></code></p>
<p>Python-can listener object, with handler to be called upon reception of a message on the CAN bus</p>
<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.CAN_manager_servo.motorListener.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">canman</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">motor</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.CAN_manager_servo.motorListener.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets stores can manager and motor object references</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>canman</strong> – The CanManager object to get messages from</p></li>
<li><p><strong>motor</strong> – The TMotorCANManager object to update</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.CAN_manager_servo.motorListener.on_message_received">
<span class="sig-name descname"><span class="pre">on_message_received</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">msg</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.CAN_manager_servo.motorListener.on_message_received" title="Permalink to this definition">¶</a></dt>
<dd><p>Updates this listener’s motor with the info contained in msg, if that message was for this motor.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>msg</strong> – A python-can CAN message</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="TMotorCANControl.CAN_manager_servo.servo_command">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">TMotorCANControl.CAN_manager_servo.</span></span><span class="sig-name descname"><span class="pre">servo_command</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">position</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">velocity</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">current</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">duty</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.CAN_manager_servo.servo_command" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Data structure to store MIT_command that will be sent upon update</p>
<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.CAN_manager_servo.servo_command.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">position</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">velocity</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">current</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">duty</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.CAN_manager_servo.servo_command.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the motor state to the input.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>position</strong> – Position in rad</p></li>
<li><p><strong>velocity</strong> – Velocity in rad/s</p></li>
<li><p><strong>kp</strong> – Position gain</p></li>
<li><p><strong>kd</strong> – Velocity gain</p></li>
<li><p><strong>current</strong> – Current in amps</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="TMotorCANControl.CAN_manager_servo.servo_motor_state">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">TMotorCANControl.CAN_manager_servo.</span></span><span class="sig-name descname"><span class="pre">servo_motor_state</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">position</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">velocity</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">current</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">temperature</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">error</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">acceleration</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.CAN_manager_servo.servo_motor_state" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Data structure to store and update motor states</p>
<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.CAN_manager_servo.servo_motor_state.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">position</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">velocity</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">current</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">temperature</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">error</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">acceleration</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.CAN_manager_servo.servo_motor_state.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the motor state to the input.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>position</strong> – Position in rad</p></li>
<li><p><strong>velocity</strong> – Velocity in rad/s</p></li>
<li><p><strong>current</strong> – current in amps</p></li>
<li><p><strong>temperature</strong> – temperature in degrees C</p></li>
<li><p><strong>error</strong> – error code, 0 means no error</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.CAN_manager_servo.servo_motor_state.set_state">
<span class="sig-name descname"><span class="pre">set_state</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">position</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">velocity</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">current</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">temperature</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">error</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">acceleration</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.CAN_manager_servo.servo_motor_state.set_state" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the motor state to the input.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>position</strong> – Position in rad</p></li>
<li><p><strong>velocity</strong> – Velocity in rad/s</p></li>
<li><p><strong>current</strong> – current in amps</p></li>
<li><p><strong>temperature</strong> – temperature in degrees C</p></li>
<li><p><strong>error</strong> – error code, 0 means no error</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.CAN_manager_servo.servo_motor_state.set_state_obj">
<span class="sig-name descname"><span class="pre">set_state_obj</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">other_motor_state</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.CAN_manager_servo.servo_motor_state.set_state_obj" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets this motor state object’s values to those of another motor state object.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>other_motor_state</strong> – The other motor state object with values to set this motor state object’s values to.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="module-TMotorCANControl.TMotorManager_mit_can">
<span id="tmotorcancontrol-tmotormanager-mit-can-module"></span><h2>TMotorCANControl.TMotorManager_mit_can module<a class="headerlink" href="#module-TMotorCANControl.TMotorManager_mit_can" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_mit_can.TMotorManager_mit_can">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">TMotorCANControl.TMotorManager_mit_can.</span></span><span class="sig-name descname"><span class="pre">TMotorManager_mit_can</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">motor_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'AK80-9'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">motor_ID</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">CSV_file</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">log_vars</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">['output_angle',</span> <span class="pre">'output_velocity',</span> <span class="pre">'output_acceleration',</span> <span class="pre">'current',</span> <span class="pre">'output_torque']</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_torque_compensation</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.TMotorManager_mit_can.TMotorManager_mit_can" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>The user-facing class that manages the motor. This class should be
used in the context of a with as block, in order to safely enter/exit
control of the motor.</p>
<dl class="py property">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_mit_can.TMotorManager_mit_can.T">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">T</span></span><a class="headerlink" href="#TMotorCANControl.TMotorManager_mit_can.TMotorManager_mit_can.T" title="Permalink to this definition">¶</a></dt>
<dd><p>Temperature in Degrees Celsius</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_mit_can.TMotorManager_mit_can.TMotor_current_to_qaxis_current">
<span class="sig-name descname"><span class="pre">TMotor_current_to_qaxis_current</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">iTM</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.TMotorManager_mit_can.TMotorManager_mit_can.TMotor_current_to_qaxis_current" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_mit_can.TMotorManager_mit_can.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">motor_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'AK80-9'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">motor_ID</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">CSV_file</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">log_vars</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">['output_angle',</span> <span class="pre">'output_velocity',</span> <span class="pre">'output_acceleration',</span> <span class="pre">'current',</span> <span class="pre">'output_torque']</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_torque_compensation</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.TMotorManager_mit_can.TMotorManager_mit_can.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets up the motor manager. Note the device will not be powered on by this method! You must
call __enter__, mostly commonly by using a with block, before attempting to control the motor.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>motor_type</strong> – The type of motor being controlled, ie AK80-9.</p></li>
<li><p><strong>motor_ID</strong> – The CAN ID of the motor.</p></li>
<li><p><strong>CSV_file</strong> – A CSV file to output log info to. If None, no log will be recorded.</p></li>
<li><p><strong>log_vars</strong> – The variables to log as a python list. The full list of possibilities is</p></li>
<li><p><strong>&quot;output_angle&quot;</strong> (<em>-</em>) – </p></li>
<li><p><strong>&quot;output_velocity&quot;</strong> (<em>-</em>) – </p></li>
<li><p><strong>&quot;output_acceleration&quot;</strong> (<em>-</em>) – </p></li>
<li><p><strong>&quot;current&quot;</strong> (<em>-</em>) – </p></li>
<li><p><strong>&quot;output_torque&quot;</strong> (<em>-</em>) – </p></li>
<li><p><strong>&quot;motor_angle&quot;</strong> (<em>-</em>) – </p></li>
<li><p><strong>&quot;motor_velocity&quot;</strong> (<em>-</em>) – </p></li>
<li><p><strong>&quot;motor_acceleration&quot;</strong> (<em>-</em>) – </p></li>
<li><p><strong>&quot;motor_torque&quot;</strong> (<em>-</em>) – </p></li>
<li><p><strong>use_torque_compensation</strong> – Enables a more complex torque model to compensate for friction, if available</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_mit_can.TMotorManager_mit_can._send_command">
<span class="sig-name descname"><span class="pre">_send_command</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.TMotorManager_mit_can.TMotorManager_mit_can._send_command" title="Permalink to this definition">¶</a></dt>
<dd><p>Sends a command to the motor depending on whats controlm mode the motor is in. This method
is called by update(), and should only be called on its own if you don’t want to update the motor state info.</p>
<p>Notably, the current is converted to amps from the reported ‘torque’ value, which is i*Kt.
This allows control based on actual q-axis current, rather than estimated torque, which
doesn’t account for friction losses.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_mit_can.TMotorManager_mit_can._update_state_async">
<span class="sig-name descname"><span class="pre">_update_state_async</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">MIT_state</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.TMotorManager_mit_can.TMotorManager_mit_can._update_state_async" title="Permalink to this definition">¶</a></dt>
<dd><p>This method is called by the handler every time a message is recieved on the bus
from this motor, to store the most recent state information for later</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>MIT_state</strong> – The MIT_Motor_State namedtuple with the most recent motor state.</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>RuntimeError when device sends back an error code that is not 0</strong><strong> (</strong><strong>0 meaning no error</strong><strong>)</strong> – </p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_mit_can.TMotorManager_mit_can.check_can_connection">
<span class="sig-name descname"><span class="pre">check_can_connection</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.TMotorManager_mit_can.TMotorManager_mit_can.check_can_connection" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks the motor’s connection by attempting to send 10 startup messages.
If it gets 10 replies, then the connection is confirmed.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>True if a connection is established and False otherwise.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_mit_can.TMotorManager_mit_can.device_info_string">
<span class="sig-name descname"><span class="pre">device_info_string</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.TMotorManager_mit_can.TMotorManager_mit_can.device_info_string" title="Permalink to this definition">¶</a></dt>
<dd><p>Prints the motor’s ID and device type.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_mit_can.TMotorManager_mit_can.e">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">e</span></span><a class="headerlink" href="#TMotorCANControl.TMotorManager_mit_can.TMotorManager_mit_can.e" title="Permalink to this definition">¶</a></dt>
<dd><p>Motor error code. 0 means no error.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_mit_can.TMotorManager_mit_can.get_current_qaxis_amps">
<span class="sig-name descname"><span class="pre">get_current_qaxis_amps</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.TMotorManager_mit_can.TMotorManager_mit_can.get_current_qaxis_amps" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns:
The most recently updated qaxis current in amps</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_mit_can.TMotorManager_mit_can.get_motor_acceleration_radians_per_second_squared">
<span class="sig-name descname"><span class="pre">get_motor_acceleration_radians_per_second_squared</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.TMotorManager_mit_can.TMotorManager_mit_can.get_motor_acceleration_radians_per_second_squared" title="Permalink to this definition">¶</a></dt>
<dd><p>Wrapper for get_output_acceleration that accounts for gear ratio to get motor-side acceleration</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The most recently updated motor-side acceleration in rad/s/s.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_mit_can.TMotorManager_mit_can.get_motor_angle_radians">
<span class="sig-name descname"><span class="pre">get_motor_angle_radians</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.TMotorManager_mit_can.TMotorManager_mit_can.get_motor_angle_radians" title="Permalink to this definition">¶</a></dt>
<dd><p>Wrapper for get_output_angle that accounts for gear ratio to get motor-side angle</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The most recently updated motor-side angle in rad.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_mit_can.TMotorManager_mit_can.get_motor_error_code">
<span class="sig-name descname"><span class="pre">get_motor_error_code</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.TMotorManager_mit_can.TMotorManager_mit_can.get_motor_error_code" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns:
The most recently updated motor error code.
Note the program should throw a runtime error before you get a chance to read
this value if it is ever anything besides 0.</p>
<p>Codes:
- 0 : ‘No Error’,
- 1 : ‘Over temperature fault’,
- 2 : ‘Over current fault’,
- 3 : ‘Over voltage fault’,
- 4 : ‘Under voltage fault’,
- 5 : ‘Encoder fault’,
- 6 : ‘Phase current unbalance fault (The hardware may be damaged)’</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_mit_can.TMotorManager_mit_can.get_motor_torque_newton_meters">
<span class="sig-name descname"><span class="pre">get_motor_torque_newton_meters</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.TMotorManager_mit_can.TMotorManager_mit_can.get_motor_torque_newton_meters" title="Permalink to this definition">¶</a></dt>
<dd><p>Wrapper for get_output_torque that accounts for gear ratio to get motor-side torque</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The most recently updated motor-side torque in Nm.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_mit_can.TMotorManager_mit_can.get_motor_velocity_radians_per_second">
<span class="sig-name descname"><span class="pre">get_motor_velocity_radians_per_second</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.TMotorManager_mit_can.TMotorManager_mit_can.get_motor_velocity_radians_per_second" title="Permalink to this definition">¶</a></dt>
<dd><p>Wrapper for get_output_velocity that accounts for gear ratio to get motor-side velocity</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The most recently updated motor-side velocity in rad/s.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_mit_can.TMotorManager_mit_can.get_output_acceleration_radians_per_second_squared">
<span class="sig-name descname"><span class="pre">get_output_acceleration_radians_per_second_squared</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.TMotorManager_mit_can.TMotorManager_mit_can.get_output_acceleration_radians_per_second_squared" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The most recently updated output acceleration in radians per second per second</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_mit_can.TMotorManager_mit_can.get_output_angle_radians">
<span class="sig-name descname"><span class="pre">get_output_angle_radians</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.TMotorManager_mit_can.TMotorManager_mit_can.get_output_angle_radians" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns:
The most recently updated output angle in radians</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_mit_can.TMotorManager_mit_can.get_output_torque_newton_meters">
<span class="sig-name descname"><span class="pre">get_output_torque_newton_meters</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.TMotorManager_mit_can.TMotorManager_mit_can.get_output_torque_newton_meters" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>the most recently updated output torque in Nm</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_mit_can.TMotorManager_mit_can.get_output_velocity_radians_per_second">
<span class="sig-name descname"><span class="pre">get_output_velocity_radians_per_second</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.TMotorManager_mit_can.TMotorManager_mit_can.get_output_velocity_radians_per_second" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The most recently updated output velocity in radians per second</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_mit_can.TMotorManager_mit_can.get_temperature_celsius">
<span class="sig-name descname"><span class="pre">get_temperature_celsius</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.TMotorManager_mit_can.TMotorManager_mit_can.get_temperature_celsius" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns:
The most recently updated motor temperature in degrees C.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_mit_can.TMotorManager_mit_can.i">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">i</span></span><a class="headerlink" href="#TMotorCANControl.TMotorManager_mit_can.TMotorManager_mit_can.i" title="Permalink to this definition">¶</a></dt>
<dd><p>Q-axis current in amps</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_mit_can.TMotorManager_mit_can.power_off">
<span class="sig-name descname"><span class="pre">power_off</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.TMotorManager_mit_can.TMotorManager_mit_can.power_off" title="Permalink to this definition">¶</a></dt>
<dd><p>Powers off the motor.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_mit_can.TMotorManager_mit_can.power_on">
<span class="sig-name descname"><span class="pre">power_on</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.TMotorManager_mit_can.TMotorManager_mit_can.power_on" title="Permalink to this definition">¶</a></dt>
<dd><p>Powers on the motor. You may hear a faint hiss.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_mit_can.TMotorManager_mit_can.qaxis_current_to_TMotor_current">
<span class="sig-name descname"><span class="pre">qaxis_current_to_TMotor_current</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">iq</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.TMotorManager_mit_can.TMotorManager_mit_can.qaxis_current_to_TMotor_current" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_mit_can.TMotorManager_mit_can.set_current_gains">
<span class="sig-name descname"><span class="pre">set_current_gains</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">kp</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">40</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ki</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">400</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ff</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">128</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">spoof</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.TMotorManager_mit_can.TMotorManager_mit_can.set_current_gains" title="Permalink to this definition">¶</a></dt>
<dd><p>Uses plain current mode, will send 0.0 for position gains in addition to requested current.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>kp</strong> – A dummy argument for backward compatibility with the dephy library.</p></li>
<li><p><strong>ki</strong> – A dummy argument for backward compatibility with the dephy library.</p></li>
<li><p><strong>ff</strong> – A dummy argument for backward compatibility with the dephy library.</p></li>
<li><p><strong>spoof</strong> – A dummy argument for backward compatibility with the dephy library.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_mit_can.TMotorManager_mit_can.set_impedance_gains_real_unit">
<span class="sig-name descname"><span class="pre">set_impedance_gains_real_unit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">kp</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ki</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">K</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.08922</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">B</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.003807</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ff</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.TMotorManager_mit_can.TMotorManager_mit_can.set_impedance_gains_real_unit" title="Permalink to this definition">¶</a></dt>
<dd><p>Uses plain impedance mode, will send 0.0 for current command in addition to position request.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>kp</strong> – A dummy argument for backward compatibility with the dephy library.</p></li>
<li><p><strong>ki</strong> – A dummy argument for backward compatibility with the dephy library.</p></li>
<li><p><strong>K</strong> – The stiffness in Nm/rad</p></li>
<li><p><strong>B</strong> – The damping in Nm/(rad/s)</p></li>
<li><p><strong>ff</strong> – A dummy argument for backward compatibility with the dephy library.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_mit_can.TMotorManager_mit_can.set_impedance_gains_real_unit_full_state_feedback">
<span class="sig-name descname"><span class="pre">set_impedance_gains_real_unit_full_state_feedback</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">kp</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ki</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">K</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.08922</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">B</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.003807</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ff</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.TMotorManager_mit_can.TMotorManager_mit_can.set_impedance_gains_real_unit_full_state_feedback" title="Permalink to this definition">¶</a></dt>
<dd><p>”
Uses full state feedback mode, will send whatever current command is set in addition to position request.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>kp</strong> – A dummy argument for backward compatibility with the dephy library.</p></li>
<li><p><strong>ki</strong> – A dummy argument for backward compatibility with the dephy library.</p></li>
<li><p><strong>K</strong> – The stiffness in Nm/rad</p></li>
<li><p><strong>B</strong> – The damping in Nm/(rad/s)</p></li>
<li><p><strong>ff</strong> – A dummy argument for backward compatibility with the dephy library.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_mit_can.TMotorManager_mit_can.set_motor_angle_radians">
<span class="sig-name descname"><span class="pre">set_motor_angle_radians</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pos</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.TMotorManager_mit_can.TMotorManager_mit_can.set_motor_angle_radians" title="Permalink to this definition">¶</a></dt>
<dd><p>Wrapper for set_output_angle that accounts for gear ratio to control motor-side angle</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>pos</strong> – The desired motor-side position in rad.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_mit_can.TMotorManager_mit_can.set_motor_current_qaxis_amps">
<span class="sig-name descname"><span class="pre">set_motor_current_qaxis_amps</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">current</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.TMotorManager_mit_can.TMotorManager_mit_can.set_motor_current_qaxis_amps" title="Permalink to this definition">¶</a></dt>
<dd><p>Used for either current or full state feedback mode to set current command.
Note, this does not send a command, it updates the TMotorManager’s saved command,
which will be sent when update() is called.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>current</strong> – the desired current in amps.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_mit_can.TMotorManager_mit_can.set_motor_torque_newton_meters">
<span class="sig-name descname"><span class="pre">set_motor_torque_newton_meters</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">torque</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.TMotorManager_mit_can.TMotorManager_mit_can.set_motor_torque_newton_meters" title="Permalink to this definition">¶</a></dt>
<dd><p>Version of set_output_torque that accounts for gear ratio to control motor-side torque</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>torque</strong> – The desired motor-side torque in Nm.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_mit_can.TMotorManager_mit_can.set_motor_velocity_radians_per_second">
<span class="sig-name descname"><span class="pre">set_motor_velocity_radians_per_second</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">vel</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.TMotorManager_mit_can.TMotorManager_mit_can.set_motor_velocity_radians_per_second" title="Permalink to this definition">¶</a></dt>
<dd><p>Wrapper for set_output_velocity that accounts for gear ratio to control motor-side velocity</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>vel</strong> – The desired motor-side velocity in rad/s.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_mit_can.TMotorManager_mit_can.set_output_angle_radians">
<span class="sig-name descname"><span class="pre">set_output_angle_radians</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pos</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.TMotorManager_mit_can.TMotorManager_mit_can.set_output_angle_radians" title="Permalink to this definition">¶</a></dt>
<dd><p>Used for either impedance or full state feedback mode to set output angle command.
Note, this does not send a command, it updates the TMotorManager’s saved command,
which will be sent when update() is called.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>pos</strong> – The desired output position in rads</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_mit_can.TMotorManager_mit_can.set_output_torque_newton_meters">
<span class="sig-name descname"><span class="pre">set_output_torque_newton_meters</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">torque</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.TMotorManager_mit_can.TMotorManager_mit_can.set_output_torque_newton_meters" title="Permalink to this definition">¶</a></dt>
<dd><p>Used for either current or MIT Mode to set current, based on desired torque.
If a more complicated torque model is available for the motor, that will be used.
Otherwise it will just use the motor’s torque constant.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>torque</strong> – The desired output torque in Nm.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_mit_can.TMotorManager_mit_can.set_output_velocity_radians_per_second">
<span class="sig-name descname"><span class="pre">set_output_velocity_radians_per_second</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">vel</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.TMotorManager_mit_can.TMotorManager_mit_can.set_output_velocity_radians_per_second" title="Permalink to this definition">¶</a></dt>
<dd><p>Used for either speed or full state feedback mode to set output velocity command.
Note, this does not send a command, it updates the TMotorManager’s saved command,
which will be sent when update() is called.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>vel</strong> – The desired output speed in rad/s</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_mit_can.TMotorManager_mit_can.set_speed_gains">
<span class="sig-name descname"><span class="pre">set_speed_gains</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">kd</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1.0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.TMotorManager_mit_can.TMotorManager_mit_can.set_speed_gains" title="Permalink to this definition">¶</a></dt>
<dd><p>Uses plain speed mode, will send 0.0 for position gain and for feed forward current.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>kd</strong> – The gain for the speed controller. Control law will be (v_des - v_actual)*kd = iq</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_mit_can.TMotorManager_mit_can.update">
<span class="sig-name descname"><span class="pre">update</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.TMotorManager_mit_can.TMotorManager_mit_can.update" title="Permalink to this definition">¶</a></dt>
<dd><p>This method is called by the user to synchronize the current state used by the controller
with the most recent message recieved, as well as to send the current command.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_mit_can.TMotorManager_mit_can.zero_position">
<span class="sig-name descname"><span class="pre">zero_position</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.TMotorManager_mit_can.TMotorManager_mit_can.zero_position" title="Permalink to this definition">¶</a></dt>
<dd><p>Zeros the position–like a scale you have to wait about a second before you can
use the motor again. This responsibility is on the user!!</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_mit_can.TMotorManager_mit_can.">
<span id="TMotorCANControl.TMotorManager_mit_can.TMotorManager_mit_can.θ"></span><em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">θ</span></span><a class="headerlink" href="#TMotorCANControl.TMotorManager_mit_can.TMotorManager_mit_can." title="Permalink to this definition">¶</a></dt>
<dd><p>Output angle in rad</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_mit_can.TMotorManager_mit_can.d">
<span id="TMotorCANControl.TMotorManager_mit_can.TMotorManager_mit_can.θd"></span><em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">θd</span></span><a class="headerlink" href="#TMotorCANControl.TMotorManager_mit_can.TMotorManager_mit_can.d" title="Permalink to this definition">¶</a></dt>
<dd><p>Output velocity in rad/s</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_mit_can.TMotorManager_mit_can.dd">
<span id="TMotorCANControl.TMotorManager_mit_can.TMotorManager_mit_can.θdd"></span><em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">θdd</span></span><a class="headerlink" href="#TMotorCANControl.TMotorManager_mit_can.TMotorManager_mit_can.dd" title="Permalink to this definition">¶</a></dt>
<dd><p>Output acceleration in rad/s/s</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="id0">
<span id="TMotorCANControl.TMotorManager_mit_can.TMotorManager_mit_can.τ"></span><em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">τ</span></span><a class="headerlink" href="#id0" title="Permalink to this definition">¶</a></dt>
<dd><p>Output torque in Nm</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_mit_can.TMotorManager_mit_can.m">
<span id="TMotorCANControl.TMotorManager_mit_can.TMotorManager_mit_can.τm"></span><em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">τm</span></span><a class="headerlink" href="#TMotorCANControl.TMotorManager_mit_can.TMotorManager_mit_can.m" title="Permalink to this definition">¶</a></dt>
<dd><p>Motor-side torque in Nm</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="id3">
<span id="TMotorCANControl.TMotorManager_mit_can.TMotorManager_mit_can.φ"></span><em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">φ</span></span><a class="headerlink" href="#id3" title="Permalink to this definition">¶</a></dt>
<dd><p>Motor-side angle in rad</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="id4">
<span id="TMotorCANControl.TMotorManager_mit_can.TMotorManager_mit_can.φd"></span><em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">φd</span></span><a class="headerlink" href="#id4" title="Permalink to this definition">¶</a></dt>
<dd><p>Motor-side velocity in rad/s</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="id5">
<span id="TMotorCANControl.TMotorManager_mit_can.TMotorManager_mit_can.φdd"></span><em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">φdd</span></span><a class="headerlink" href="#id5" title="Permalink to this definition">¶</a></dt>
<dd><p>Motor-side acceleration in rad/s/s</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_mit_can._TMotorManState">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">TMotorCANControl.TMotorManager_mit_can.</span></span><span class="sig-name descname"><span class="pre">_TMotorManState</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.TMotorManager_mit_can._TMotorManState" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">enum.Enum</span></code></p>
<p>An Enum to keep track of different control states</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_mit_can._TMotorManState.CURRENT">
<span class="sig-name descname"><span class="pre">CURRENT</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">2</span></em><a class="headerlink" href="#TMotorCANControl.TMotorManager_mit_can._TMotorManState.CURRENT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_mit_can._TMotorManState.FULL_STATE">
<span class="sig-name descname"><span class="pre">FULL_STATE</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">3</span></em><a class="headerlink" href="#TMotorCANControl.TMotorManager_mit_can._TMotorManState.FULL_STATE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_mit_can._TMotorManState.IDLE">
<span class="sig-name descname"><span class="pre">IDLE</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">0</span></em><a class="headerlink" href="#TMotorCANControl.TMotorManager_mit_can._TMotorManState.IDLE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_mit_can._TMotorManState.IMPEDANCE">
<span class="sig-name descname"><span class="pre">IMPEDANCE</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">1</span></em><a class="headerlink" href="#TMotorCANControl.TMotorManager_mit_can._TMotorManState.IMPEDANCE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_mit_can._TMotorManState.SPEED">
<span class="sig-name descname"><span class="pre">SPEED</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">4</span></em><a class="headerlink" href="#TMotorCANControl.TMotorManager_mit_can._TMotorManState.SPEED" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</section>
<section id="module-TMotorCANControl.TMotorManager_servo_can">
<span id="tmotorcancontrol-tmotormanager-servo-can-module"></span><h2>TMotorCANControl.TMotorManager_servo_can module<a class="headerlink" href="#module-TMotorCANControl.TMotorManager_servo_can" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_can.TMotorManager_servo_can">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">TMotorCANControl.TMotorManager_servo_can.</span></span><span class="sig-name descname"><span class="pre">TMotorManager_servo_can</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">motor_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'AK80-9'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">motor_ID</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">CSV_file</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">log_vars</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">['motor_position',</span> <span class="pre">'motor_speed',</span> <span class="pre">'motor_current',</span> <span class="pre">'motor_temperature']</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_torque_compensation</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_can.TMotorManager_servo_can" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>The user-facing class that manages the motor. This class should be
used in the context of a with as block, in order to safely enter/exit
control of the motor.</p>
<dl class="py property">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_can.TMotorManager_servo_can.T">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">T</span></span><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_can.TMotorManager_servo_can.T" title="Permalink to this definition">¶</a></dt>
<dd><p>Temperature in Degrees Celsius</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_can.TMotorManager_servo_can.TMotor_current_to_qaxis_current">
<span class="sig-name descname"><span class="pre">TMotor_current_to_qaxis_current</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">iTM</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_can.TMotorManager_servo_can.TMotor_current_to_qaxis_current" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_can.TMotorManager_servo_can.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">motor_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'AK80-9'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">motor_ID</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">CSV_file</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">log_vars</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">['motor_position',</span> <span class="pre">'motor_speed',</span> <span class="pre">'motor_current',</span> <span class="pre">'motor_temperature']</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_torque_compensation</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_can.TMotorManager_servo_can.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets up the motor manager. Note the device will not be powered on by this method! You must
call __enter__, mostly commonly by using a with block, before attempting to control the motor.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>motor_type</strong> – The type of motor being controlled, ie AK80-9.</p></li>
<li><p><strong>motor_ID</strong> – The CAN ID of the motor.</p></li>
<li><p><strong>CSV_file</strong> – A CSV file to output log info to. If None, no log will be recorded.</p></li>
<li><p><strong>log_vars</strong> – The variables to log as a python list. The full list of possibilities is</p></li>
<li><p><strong>&quot;output_angle&quot;</strong> (<em>-</em>) – </p></li>
<li><p><strong>&quot;output_velocity&quot;</strong> (<em>-</em>) – </p></li>
<li><p><strong>&quot;output_acceleration&quot;</strong> (<em>-</em>) – </p></li>
<li><p><strong>&quot;current&quot;</strong> (<em>-</em>) – </p></li>
<li><p><strong>&quot;output_torque&quot;</strong> (<em>-</em>) – </p></li>
<li><p><strong>&quot;motor_angle&quot;</strong> (<em>-</em>) – </p></li>
<li><p><strong>&quot;motor_velocity&quot;</strong> (<em>-</em>) – </p></li>
<li><p><strong>&quot;motor_acceleration&quot;</strong> (<em>-</em>) – </p></li>
<li><p><strong>&quot;motor_torque&quot;</strong> (<em>-</em>) – </p></li>
<li><p><strong>use_torque_compensation</strong> – Enables a more complex torque model to compensate for friction, if available</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_can.TMotorManager_servo_can._send_command">
<span class="sig-name descname"><span class="pre">_send_command</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_can.TMotorManager_servo_can._send_command" title="Permalink to this definition">¶</a></dt>
<dd><p>Sends a command to the motor depending on whats controlm mode the motor is in. This method
is called by update(), and should only be called on its own if you don’t want to update the motor state info.</p>
<p>Notably, the current is converted to amps from the reported ‘torque’ value, which is i*Kt.
This allows control based on actual q-axis current, rather than estimated torque, which
doesn’t account for friction losses.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_can.TMotorManager_servo_can._update_state_async">
<span class="sig-name descname"><span class="pre">_update_state_async</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">servo_state</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_can.TMotorManager_servo_can._update_state_async" title="Permalink to this definition">¶</a></dt>
<dd><p>This method is called by the handler every time a message is recieved on the bus
from this motor, to store the most recent state information for later</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>servo_state</strong> – the servo_state object with the updated motor state</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>RuntimeError when device sends back an error code that is not 0</strong><strong> (</strong><strong>0 meaning no error</strong><strong>)</strong> – </p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_can.TMotorManager_servo_can.check_can_connection">
<span class="sig-name descname"><span class="pre">check_can_connection</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_can.TMotorManager_servo_can.check_can_connection" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks the motor’s connection by attempting to send 10 startup messages.
If it gets 10 replies, then the connection is confirmed.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>True if a connection is established and False otherwise.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_can.TMotorManager_servo_can.device_info_string">
<span class="sig-name descname"><span class="pre">device_info_string</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_can.TMotorManager_servo_can.device_info_string" title="Permalink to this definition">¶</a></dt>
<dd><p>Prints the motor’s ID and device type.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_can.TMotorManager_servo_can.e">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">e</span></span><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_can.TMotorManager_servo_can.e" title="Permalink to this definition">¶</a></dt>
<dd><p>Motor error code. 0 means no error.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_can.TMotorManager_servo_can.enter_current_brake_control">
<span class="sig-name descname"><span class="pre">enter_current_brake_control</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_can.TMotorManager_servo_can.enter_current_brake_control" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_can.TMotorManager_servo_can.enter_current_control">
<span class="sig-name descname"><span class="pre">enter_current_control</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_can.TMotorManager_servo_can.enter_current_control" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_can.TMotorManager_servo_can.enter_duty_cycle_control">
<span class="sig-name descname"><span class="pre">enter_duty_cycle_control</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_can.TMotorManager_servo_can.enter_duty_cycle_control" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_can.TMotorManager_servo_can.enter_position_control">
<span class="sig-name descname"><span class="pre">enter_position_control</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_can.TMotorManager_servo_can.enter_position_control" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_can.TMotorManager_servo_can.enter_position_velocity_control">
<span class="sig-name descname"><span class="pre">enter_position_velocity_control</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_can.TMotorManager_servo_can.enter_position_velocity_control" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_can.TMotorManager_servo_can.enter_velocity_control">
<span class="sig-name descname"><span class="pre">enter_velocity_control</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_can.TMotorManager_servo_can.enter_velocity_control" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_can.TMotorManager_servo_can.get_current_qaxis_amps">
<span class="sig-name descname"><span class="pre">get_current_qaxis_amps</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_can.TMotorManager_servo_can.get_current_qaxis_amps" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns:
The most recently updated qaxis current in amps</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_can.TMotorManager_servo_can.get_motor_acceleration_radians_per_second_squared">
<span class="sig-name descname"><span class="pre">get_motor_acceleration_radians_per_second_squared</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_can.TMotorManager_servo_can.get_motor_acceleration_radians_per_second_squared" title="Permalink to this definition">¶</a></dt>
<dd><p>Wrapper for get_output_acceleration that accounts for gear ratio to get motor-side acceleration</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The most recently updated motor-side acceleration in rad/s/s.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_can.TMotorManager_servo_can.get_motor_angle_radians">
<span class="sig-name descname"><span class="pre">get_motor_angle_radians</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_can.TMotorManager_servo_can.get_motor_angle_radians" title="Permalink to this definition">¶</a></dt>
<dd><p>Wrapper for get_output_angle that accounts for gear ratio to get motor-side angle</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The most recently updated motor-side angle in rad.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_can.TMotorManager_servo_can.get_motor_error_code">
<span class="sig-name descname"><span class="pre">get_motor_error_code</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_can.TMotorManager_servo_can.get_motor_error_code" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns:
The most recently updated motor error code.
Note the program should throw a runtime error before you get a chance to read
this value if it is ever anything besides 0.</p>
<p>Codes:
- 0 : ‘No Error’,
- 1 : ‘Over temperature fault’,
- 2 : ‘Over current fault’,
- 3 : ‘Over voltage fault’,
- 4 : ‘Under voltage fault’,
- 5 : ‘Encoder fault’,
- 6 : ‘Phase current unbalance fault (The hardware may be damaged)’</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_can.TMotorManager_servo_can.get_motor_torque_newton_meters">
<span class="sig-name descname"><span class="pre">get_motor_torque_newton_meters</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_can.TMotorManager_servo_can.get_motor_torque_newton_meters" title="Permalink to this definition">¶</a></dt>
<dd><p>Wrapper for get_output_torque that accounts for gear ratio to get motor-side torque</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The most recently updated motor-side torque in Nm.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_can.TMotorManager_servo_can.get_motor_velocity_radians_per_second">
<span class="sig-name descname"><span class="pre">get_motor_velocity_radians_per_second</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_can.TMotorManager_servo_can.get_motor_velocity_radians_per_second" title="Permalink to this definition">¶</a></dt>
<dd><p>Wrapper for get_output_velocity that accounts for gear ratio to get motor-side velocity</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The most recently updated motor-side velocity in rad/s.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_can.TMotorManager_servo_can.get_output_acceleration_radians_per_second_squared">
<span class="sig-name descname"><span class="pre">get_output_acceleration_radians_per_second_squared</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_can.TMotorManager_servo_can.get_output_acceleration_radians_per_second_squared" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The most recently updated output acceleration in radians per second per second</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_can.TMotorManager_servo_can.get_output_angle_radians">
<span class="sig-name descname"><span class="pre">get_output_angle_radians</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_can.TMotorManager_servo_can.get_output_angle_radians" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns:
The most recently updated output angle in radians</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_can.TMotorManager_servo_can.get_output_torque_newton_meters">
<span class="sig-name descname"><span class="pre">get_output_torque_newton_meters</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_can.TMotorManager_servo_can.get_output_torque_newton_meters" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>the most recently updated output torque in Nm</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_can.TMotorManager_servo_can.get_output_velocity_radians_per_second">
<span class="sig-name descname"><span class="pre">get_output_velocity_radians_per_second</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_can.TMotorManager_servo_can.get_output_velocity_radians_per_second" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The most recently updated output velocity in radians per second</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_can.TMotorManager_servo_can.get_temperature_celsius">
<span class="sig-name descname"><span class="pre">get_temperature_celsius</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_can.TMotorManager_servo_can.get_temperature_celsius" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns:
The most recently updated motor temperature in degrees C.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_can.TMotorManager_servo_can.i">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">i</span></span><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_can.TMotorManager_servo_can.i" title="Permalink to this definition">¶</a></dt>
<dd><p>Q-axis current in amps</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_can.TMotorManager_servo_can.power_off">
<span class="sig-name descname"><span class="pre">power_off</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_can.TMotorManager_servo_can.power_off" title="Permalink to this definition">¶</a></dt>
<dd><p>Powers off the motor.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_can.TMotorManager_servo_can.power_on">
<span class="sig-name descname"><span class="pre">power_on</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_can.TMotorManager_servo_can.power_on" title="Permalink to this definition">¶</a></dt>
<dd><p>Powers on the motor. You may hear a faint hiss.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_can.TMotorManager_servo_can.qaxis_current_to_TMotor_current">
<span class="sig-name descname"><span class="pre">qaxis_current_to_TMotor_current</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">iq</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_can.TMotorManager_servo_can.qaxis_current_to_TMotor_current" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_can.TMotorManager_servo_can.set_duty_cycle">
<span class="sig-name descname"><span class="pre">set_duty_cycle</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">duty</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_can.TMotorManager_servo_can.set_duty_cycle" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_can.TMotorManager_servo_can.set_motor_angle_radians">
<span class="sig-name descname"><span class="pre">set_motor_angle_radians</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pos</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_can.TMotorManager_servo_can.set_motor_angle_radians" title="Permalink to this definition">¶</a></dt>
<dd><p>Wrapper for set_output_angle that accounts for gear ratio to control motor-side angle</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>pos</strong> – The desired motor-side position in rad.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_can.TMotorManager_servo_can.set_motor_current_qaxis_amps">
<span class="sig-name descname"><span class="pre">set_motor_current_qaxis_amps</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">current</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_can.TMotorManager_servo_can.set_motor_current_qaxis_amps" title="Permalink to this definition">¶</a></dt>
<dd><p>Used for either current or full state feedback mode to set current command.
Note, this does not send a command, it updates the TMotorManager’s saved command,
which will be sent when update() is called.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>current</strong> – the desired current in amps.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_can.TMotorManager_servo_can.set_motor_torque_newton_meters">
<span class="sig-name descname"><span class="pre">set_motor_torque_newton_meters</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">torque</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_can.TMotorManager_servo_can.set_motor_torque_newton_meters" title="Permalink to this definition">¶</a></dt>
<dd><p>Version of set_output_torque that accounts for gear ratio to control motor-side torque</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>torque</strong> – The desired motor-side torque in Nm.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_can.TMotorManager_servo_can.set_motor_velocity_radians_per_second">
<span class="sig-name descname"><span class="pre">set_motor_velocity_radians_per_second</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">vel</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_can.TMotorManager_servo_can.set_motor_velocity_radians_per_second" title="Permalink to this definition">¶</a></dt>
<dd><p>Wrapper for set_output_velocity that accounts for gear ratio to control motor-side velocity</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>vel</strong> – The desired motor-side velocity in rad/s.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_can.TMotorManager_servo_can.set_output_angle_radians">
<span class="sig-name descname"><span class="pre">set_output_angle_radians</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pos</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_can.TMotorManager_servo_can.set_output_angle_radians" title="Permalink to this definition">¶</a></dt>
<dd><p>Used for either impedance or full state feedback mode to set output angle command.
Note, this does not send a command, it updates the TMotorManager’s saved command,
which will be sent when update() is called.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>pos</strong> – The desired output position in rads</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_can.TMotorManager_servo_can.set_output_torque_newton_meters">
<span class="sig-name descname"><span class="pre">set_output_torque_newton_meters</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">torque</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_can.TMotorManager_servo_can.set_output_torque_newton_meters" title="Permalink to this definition">¶</a></dt>
<dd><p>Used for either current or MIT Mode to set current, based on desired torque.
If a more complicated torque model is available for the motor, that will be used.
Otherwise it will just use the motor’s torque constant.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>torque</strong> – The desired output torque in Nm.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_can.TMotorManager_servo_can.set_output_velocity_radians_per_second">
<span class="sig-name descname"><span class="pre">set_output_velocity_radians_per_second</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">vel</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_can.TMotorManager_servo_can.set_output_velocity_radians_per_second" title="Permalink to this definition">¶</a></dt>
<dd><p>Used for either speed or full state feedback mode to set output velocity command.
Note, this does not send a command, it updates the TMotorManager’s saved command,
which will be sent when update() is called.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>vel</strong> – The desired output speed in rad/s</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_can.TMotorManager_servo_can.update">
<span class="sig-name descname"><span class="pre">update</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_can.TMotorManager_servo_can.update" title="Permalink to this definition">¶</a></dt>
<dd><p>This method is called by the user to synchronize the current state used by the controller/logger
with the most recent message recieved, as well as to send the current command.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_can.TMotorManager_servo_can.zero_position">
<span class="sig-name descname"><span class="pre">zero_position</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_can.TMotorManager_servo_can.zero_position" title="Permalink to this definition">¶</a></dt>
<dd><p>Zeros the position–like a scale you have to wait about a second before you can
use the motor again. This responsibility is on the user!!</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_can.TMotorManager_servo_can.">
<span id="TMotorCANControl.TMotorManager_servo_can.TMotorManager_servo_can.θ"></span><em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">θ</span></span><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_can.TMotorManager_servo_can." title="Permalink to this definition">¶</a></dt>
<dd><p>Output angle in rad</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_can.TMotorManager_servo_can.d">
<span id="TMotorCANControl.TMotorManager_servo_can.TMotorManager_servo_can.θd"></span><em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">θd</span></span><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_can.TMotorManager_servo_can.d" title="Permalink to this definition">¶</a></dt>
<dd><p>Output velocity in rad/s</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_can.TMotorManager_servo_can.dd">
<span id="TMotorCANControl.TMotorManager_servo_can.TMotorManager_servo_can.θdd"></span><em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">θdd</span></span><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_can.TMotorManager_servo_can.dd" title="Permalink to this definition">¶</a></dt>
<dd><p>Output acceleration in rad/s/s</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="id6">
<span id="TMotorCANControl.TMotorManager_servo_can.TMotorManager_servo_can.τ"></span><em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">τ</span></span><a class="headerlink" href="#id6" title="Permalink to this definition">¶</a></dt>
<dd><p>Output torque in Nm</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_can.TMotorManager_servo_can.m">
<span id="TMotorCANControl.TMotorManager_servo_can.TMotorManager_servo_can.τm"></span><em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">τm</span></span><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_can.TMotorManager_servo_can.m" title="Permalink to this definition">¶</a></dt>
<dd><p>Motor-side torque in Nm</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="id7">
<span id="TMotorCANControl.TMotorManager_servo_can.TMotorManager_servo_can.φ"></span><em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">φ</span></span><a class="headerlink" href="#id7" title="Permalink to this definition">¶</a></dt>
<dd><p>Motor-side angle in rad</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="id8">
<span id="TMotorCANControl.TMotorManager_servo_can.TMotorManager_servo_can.φd"></span><em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">φd</span></span><a class="headerlink" href="#id8" title="Permalink to this definition">¶</a></dt>
<dd><p>Motor-side velocity in rad/s</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="id9">
<span id="TMotorCANControl.TMotorManager_servo_can.TMotorManager_servo_can.φdd"></span><em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">φdd</span></span><a class="headerlink" href="#id9" title="Permalink to this definition">¶</a></dt>
<dd><p>Motor-side acceleration in rad/s/s</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_can._TMotorManState_Servo">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">TMotorCANControl.TMotorManager_servo_can.</span></span><span class="sig-name descname"><span class="pre">_TMotorManState_Servo</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_can._TMotorManState_Servo" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">enum.Enum</span></code></p>
<p>An Enum to keep track of different control states</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_can._TMotorManState_Servo.CURRENT_BRAKE">
<span class="sig-name descname"><span class="pre">CURRENT_BRAKE</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">2</span></em><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_can._TMotorManState_Servo.CURRENT_BRAKE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_can._TMotorManState_Servo.CURRENT_LOOP">
<span class="sig-name descname"><span class="pre">CURRENT_LOOP</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">1</span></em><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_can._TMotorManState_Servo.CURRENT_LOOP" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_can._TMotorManState_Servo.DUTY_CYCLE">
<span class="sig-name descname"><span class="pre">DUTY_CYCLE</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">0</span></em><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_can._TMotorManState_Servo.DUTY_CYCLE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_can._TMotorManState_Servo.POSITION">
<span class="sig-name descname"><span class="pre">POSITION</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">4</span></em><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_can._TMotorManState_Servo.POSITION" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_can._TMotorManState_Servo.POSITION_VELOCITY">
<span class="sig-name descname"><span class="pre">POSITION_VELOCITY</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">6</span></em><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_can._TMotorManState_Servo.POSITION_VELOCITY" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_can._TMotorManState_Servo.SET_ORIGIN">
<span class="sig-name descname"><span class="pre">SET_ORIGIN</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">5</span></em><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_can._TMotorManState_Servo.SET_ORIGIN" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_can._TMotorManState_Servo.VELOCITY">
<span class="sig-name descname"><span class="pre">VELOCITY</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">3</span></em><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_can._TMotorManState_Servo.VELOCITY" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</section>
<section id="module-TMotorCANControl.TMotorManager_servo_serial">
<span id="tmotorcancontrol-tmotormanager-servo-serial-module"></span><h2>TMotorCANControl.TMotorManager_servo_serial module<a class="headerlink" href="#module-TMotorCANControl.TMotorManager_servo_serial" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_serial.COMM_PACKET_ID">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">TMotorCANControl.TMotorManager_servo_serial.</span></span><span class="sig-name descname"><span class="pre">COMM_PACKET_ID</span></span><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_serial.COMM_PACKET_ID" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Basically used as ENUM to identify what each packet ID does</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_serial.COMM_PACKET_ID.COMM_ERASE_NEW_APP">
<span class="sig-name descname"><span class="pre">COMM_ERASE_NEW_APP</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">2</span></em><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_serial.COMM_PACKET_ID.COMM_ERASE_NEW_APP" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_serial.COMM_PACKET_ID.COMM_FW_VERSION">
<span class="sig-name descname"><span class="pre">COMM_FW_VERSION</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">0</span></em><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_serial.COMM_PACKET_ID.COMM_FW_VERSION" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_serial.COMM_PACKET_ID.COMM_GET_VALUES">
<span class="sig-name descname"><span class="pre">COMM_GET_VALUES</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">4</span></em><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_serial.COMM_PACKET_ID.COMM_GET_VALUES" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_serial.COMM_PACKET_ID.COMM_GET_VALUES_SETUP">
<span class="sig-name descname"><span class="pre">COMM_GET_VALUES_SETUP</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">50</span></em><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_serial.COMM_PACKET_ID.COMM_GET_VALUES_SETUP" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_serial.COMM_PACKET_ID.COMM_JUMP_TO_BOOTLOADER">
<span class="sig-name descname"><span class="pre">COMM_JUMP_TO_BOOTLOADER</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">1</span></em><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_serial.COMM_PACKET_ID.COMM_JUMP_TO_BOOTLOADER" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_serial.COMM_PACKET_ID.COMM_ROTOR_POSITION">
<span class="sig-name descname"><span class="pre">COMM_ROTOR_POSITION</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">22</span></em><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_serial.COMM_PACKET_ID.COMM_ROTOR_POSITION" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_serial.COMM_PACKET_ID.COMM_SET_CURRENT">
<span class="sig-name descname"><span class="pre">COMM_SET_CURRENT</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">6</span></em><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_serial.COMM_PACKET_ID.COMM_SET_CURRENT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_serial.COMM_PACKET_ID.COMM_SET_CURRENT_BRAKE">
<span class="sig-name descname"><span class="pre">COMM_SET_CURRENT_BRAKE</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">7</span></em><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_serial.COMM_PACKET_ID.COMM_SET_CURRENT_BRAKE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_serial.COMM_PACKET_ID.COMM_SET_DETECT">
<span class="sig-name descname"><span class="pre">COMM_SET_DETECT</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">11</span></em><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_serial.COMM_PACKET_ID.COMM_SET_DETECT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_serial.COMM_PACKET_ID.COMM_SET_DUTY">
<span class="sig-name descname"><span class="pre">COMM_SET_DUTY</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">5</span></em><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_serial.COMM_PACKET_ID.COMM_SET_DUTY" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_serial.COMM_PACKET_ID.COMM_SET_HANDBRAKE">
<span class="sig-name descname"><span class="pre">COMM_SET_HANDBRAKE</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">10</span></em><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_serial.COMM_PACKET_ID.COMM_SET_HANDBRAKE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_serial.COMM_PACKET_ID.COMM_SET_POS">
<span class="sig-name descname"><span class="pre">COMM_SET_POS</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">9</span></em><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_serial.COMM_PACKET_ID.COMM_SET_POS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_serial.COMM_PACKET_ID.COMM_SET_POS_MULTI">
<span class="sig-name descname"><span class="pre">COMM_SET_POS_MULTI</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">92</span></em><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_serial.COMM_PACKET_ID.COMM_SET_POS_MULTI" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_serial.COMM_PACKET_ID.COMM_SET_POS_ORIGIN">
<span class="sig-name descname"><span class="pre">COMM_SET_POS_ORIGIN</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">95</span></em><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_serial.COMM_PACKET_ID.COMM_SET_POS_ORIGIN" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_serial.COMM_PACKET_ID.COMM_SET_POS_SINGLE">
<span class="sig-name descname"><span class="pre">COMM_SET_POS_SINGLE</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">93</span></em><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_serial.COMM_PACKET_ID.COMM_SET_POS_SINGLE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_serial.COMM_PACKET_ID.COMM_SET_POS_SPD">
<span class="sig-name descname"><span class="pre">COMM_SET_POS_SPD</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">91</span></em><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_serial.COMM_PACKET_ID.COMM_SET_POS_SPD" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_serial.COMM_PACKET_ID.COMM_SET_POS_UNLIMITED">
<span class="sig-name descname"><span class="pre">COMM_SET_POS_UNLIMITED</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">94</span></em><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_serial.COMM_PACKET_ID.COMM_SET_POS_UNLIMITED" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_serial.COMM_PACKET_ID.COMM_SET_RPM">
<span class="sig-name descname"><span class="pre">COMM_SET_RPM</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">8</span></em><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_serial.COMM_PACKET_ID.COMM_SET_RPM" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_serial.COMM_PACKET_ID.COMM_WRITE_NEW_APP_DATA">
<span class="sig-name descname"><span class="pre">COMM_WRITE_NEW_APP_DATA</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">3</span></em><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_serial.COMM_PACKET_ID.COMM_WRITE_NEW_APP_DATA" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py data">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_serial.ERROR_CODES">
<span class="sig-prename descclassname"><span class="pre">TMotorCANControl.TMotorManager_servo_serial.</span></span><span class="sig-name descname"><span class="pre">ERROR_CODES</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{0:</span> <span class="pre">'FAULT_CODE_NONE',</span> <span class="pre">1:</span> <span class="pre">'FAULT_CODE_OVER_VOLTAGE',</span> <span class="pre">2:</span> <span class="pre">'FAULT_CODE_UNDER_VOLTAGE',</span> <span class="pre">3:</span> <span class="pre">'FAULT_CODE_DRIVE',</span> <span class="pre">4:</span> <span class="pre">'FAULT_CODE_ABS_OVER_CURRENT',</span> <span class="pre">5:</span> <span class="pre">'FAULT_CODE_OVER_TEMP_FET',</span> <span class="pre">6:</span> <span class="pre">'FAULT_CODE_OVER_TEMP_MOTOR',</span> <span class="pre">7:</span> <span class="pre">'FAULT_CODE_GATE_DRIVER_OVER_VOLTAGE',</span> <span class="pre">8:</span> <span class="pre">'FAULT_CODE_GATE_DRIVER_UNDER_VOLTAGE',</span> <span class="pre">9:</span> <span class="pre">'FAULT_CODE_MCU_UNDER_VOLTAGE',</span> <span class="pre">10:</span> <span class="pre">'FAULT_CODE_BOOTING_FROM_WATCHDOG_RESET',</span> <span class="pre">11:</span> <span class="pre">'FAULT_CODE_ENCODER_SPI',</span> <span class="pre">12:</span> <span class="pre">'FAULT_CODE_ENCODER_SINCOS_BELOW_MIN_AMPLITUDE',</span> <span class="pre">13:</span> <span class="pre">'FAULT_CODE_ENCODER_SINCOS_ABOVE_MAX_AMPLITUDE',</span> <span class="pre">14:</span> <span class="pre">'FAULT_CODE_FLASH_CORRUPTION',</span> <span class="pre">15:</span> <span class="pre">'FAULT_CODE_HIGH_OFFSET_CURRENT_SENSOR_1',</span> <span class="pre">16:</span> <span class="pre">'FAULT_CODE_HIGH_OFFSET_CURRENT_SENSOR_2',</span> <span class="pre">17:</span> <span class="pre">'FAULT_CODE_HIGH_OFFSET_CURRENT_SENSOR_3',</span> <span class="pre">18:</span> <span class="pre">'FAULT_CODE_UNBALANCED_CURRENTS'}</span></em><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_serial.ERROR_CODES" title="Permalink to this definition">¶</a></dt>
<dd><p>A dictionary mapping error code numbers to the name of the error code</p>
</dd></dl>

<dl class="py data">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_serial.PARAMETER_FLAGS">
<span class="sig-prename descclassname"><span class="pre">TMotorCANControl.TMotorManager_servo_serial.</span></span><span class="sig-name descname"><span class="pre">PARAMETER_FLAGS</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{'DUTY_CYCLE':</span> <span class="pre">128,</span> <span class="pre">'D_CURRENT':</span> <span class="pre">32,</span> <span class="pre">'INPUT_CURRENT':</span> <span class="pre">16,</span> <span class="pre">'INPUT_VOLTAGE':</span> <span class="pre">512,</span> <span class="pre">'MOSFET_TEMP':</span> <span class="pre">1,</span> <span class="pre">'MOTOR_ERROR_FLAG':</span> <span class="pre">65536,</span> <span class="pre">'MOTOR_ID':</span> <span class="pre">262144,</span> <span class="pre">'MOTOR_POSITION':</span> <span class="pre">131072,</span> <span class="pre">'MOTOR_SPEED':</span> <span class="pre">256,</span> <span class="pre">'MOTOR_TEMP':</span> <span class="pre">4,</span> <span class="pre">'OUTPUT_CURRENT':</span> <span class="pre">8,</span> <span class="pre">'Q_CURRENT':</span> <span class="pre">64}</span></em><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_serial.PARAMETER_FLAGS" title="Permalink to this definition">¶</a></dt>
<dd><p>A dictionary of flags, where 1 means enable the desired parameter during feedback, and 0 means disable.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_serial.SERVO_SERIAL_CONTROL_STATE">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">TMotorCANControl.TMotorManager_servo_serial.</span></span><span class="sig-name descname"><span class="pre">SERVO_SERIAL_CONTROL_STATE</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_serial.SERVO_SERIAL_CONTROL_STATE" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">enum.Enum</span></code></p>
<p>An Enum to keep track of different control states</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_serial.SERVO_SERIAL_CONTROL_STATE.CURRENT_BRAKE">
<span class="sig-name descname"><span class="pre">CURRENT_BRAKE</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">2</span></em><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_serial.SERVO_SERIAL_CONTROL_STATE.CURRENT_BRAKE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_serial.SERVO_SERIAL_CONTROL_STATE.CURRENT_LOOP">
<span class="sig-name descname"><span class="pre">CURRENT_LOOP</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">1</span></em><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_serial.SERVO_SERIAL_CONTROL_STATE.CURRENT_LOOP" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_serial.SERVO_SERIAL_CONTROL_STATE.DUTY_CYCLE">
<span class="sig-name descname"><span class="pre">DUTY_CYCLE</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">0</span></em><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_serial.SERVO_SERIAL_CONTROL_STATE.DUTY_CYCLE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_serial.SERVO_SERIAL_CONTROL_STATE.HANDBRAKE">
<span class="sig-name descname"><span class="pre">HANDBRAKE</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">5</span></em><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_serial.SERVO_SERIAL_CONTROL_STATE.HANDBRAKE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_serial.SERVO_SERIAL_CONTROL_STATE.IDLE">
<span class="sig-name descname"><span class="pre">IDLE</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">7</span></em><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_serial.SERVO_SERIAL_CONTROL_STATE.IDLE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_serial.SERVO_SERIAL_CONTROL_STATE.POSITION">
<span class="sig-name descname"><span class="pre">POSITION</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">4</span></em><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_serial.SERVO_SERIAL_CONTROL_STATE.POSITION" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_serial.SERVO_SERIAL_CONTROL_STATE.POSITION_VELOCITY">
<span class="sig-name descname"><span class="pre">POSITION_VELOCITY</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">6</span></em><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_serial.SERVO_SERIAL_CONTROL_STATE.POSITION_VELOCITY" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_serial.SERVO_SERIAL_CONTROL_STATE.VELOCITY">
<span class="sig-name descname"><span class="pre">VELOCITY</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">3</span></em><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_serial.SERVO_SERIAL_CONTROL_STATE.VELOCITY" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py data">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_serial.Servo_Params_Serial">
<span class="sig-prename descclassname"><span class="pre">TMotorCANControl.TMotorManager_servo_serial.</span></span><span class="sig-name descname"><span class="pre">Servo_Params_Serial</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{'AK80-9':</span> <span class="pre">{'Curr_max':</span> <span class="pre">15.0,</span> <span class="pre">'Curr_min':</span> <span class="pre">-15.0,</span> <span class="pre">'GEAR_RATIO':</span> <span class="pre">9,</span> <span class="pre">'Kt':</span> <span class="pre">0.115,</span> <span class="pre">'NUM_POLE_PAIRS':</span> <span class="pre">21,</span> <span class="pre">'P_max':</span> <span class="pre">58.85,</span> <span class="pre">'P_min':</span> <span class="pre">-58.85,</span> <span class="pre">'Temp_max':</span> <span class="pre">40.0,</span> <span class="pre">'Type':</span> <span class="pre">'AK80-9',</span> <span class="pre">'V_max':</span> <span class="pre">20.0,</span> <span class="pre">'V_min':</span> <span class="pre">-20.0}}</span></em><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_serial.Servo_Params_Serial" title="Permalink to this definition">¶</a></dt>
<dd><p>Dictionary with the default parameters for the motors, indexed by their name</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>Type</strong> (<em>str</em>) – the name of this type of motor (ie, AK##-##)</p></li>
<li><p><strong>P_min</strong> (<em>float</em>) – Minimum position in radians</p></li>
<li><p><strong>P_max</strong> (<em>float</em>) – Maximum position in radians</p></li>
<li><p><strong>V_min</strong> (<em>float</em>) – Minimum speed command in velocity control in rad/s</p></li>
<li><p><strong>V_max</strong> (<em>float</em>) – Maximum speed command in velocity control in rad/s</p></li>
<li><p><strong>Curr_min</strong> (<em>float</em>) – Minimum current command during current control in A</p></li>
<li><p><strong>Curr_max</strong> (<em>float</em>) – Maximum current command during current control in A</p></li>
<li><p><strong>Temp_max</strong> (<em>float</em>) – Temperature above which motor should be turned off in Celsius</p></li>
<li><p><strong>Kt</strong> (<em>float</em>) – Torque constant of motor in Nm/A, before gearbox, q-axis</p></li>
<li><p><strong>GEAR_RATIO</strong> (<em>int</em>) – The gear ratio of the motor “n” as in n:1</p></li>
<li><p><strong>NUM_POLE_PAIRS</strong> (<em>int</em>) – Number of pole pairs in the motor</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_serial.TMotorManager_servo_serial">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">TMotorCANControl.TMotorManager_servo_serial.</span></span><span class="sig-name descname"><span class="pre">TMotorManager_servo_serial</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">port</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'/dev/ttyUSB0'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">baud</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">961200</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">motor_params</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{'Curr_max':</span> <span class="pre">15.0,</span> <span class="pre">'Curr_min':</span> <span class="pre">-</span> <span class="pre">15.0,</span> <span class="pre">'GEAR_RATIO':</span> <span class="pre">9,</span> <span class="pre">'Kt':</span> <span class="pre">0.115,</span> <span class="pre">'NUM_POLE_PAIRS':</span> <span class="pre">21,</span> <span class="pre">'P_max':</span> <span class="pre">58.85,</span> <span class="pre">'P_min':</span> <span class="pre">-</span> <span class="pre">58.85,</span> <span class="pre">'Temp_max':</span> <span class="pre">40.0,</span> <span class="pre">'Type':</span> <span class="pre">'AK80-9',</span> <span class="pre">'V_max':</span> <span class="pre">20.0,</span> <span class="pre">'V_min':</span> <span class="pre">-</span> <span class="pre">20.0}</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_serial.TMotorManager_servo_serial" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>The user-facing class that manages the motor. This class should be
used in the “context” of a with as block, in order to safely enter/exit
control of the motor.</p>
<dl class="py property">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_serial.TMotorManager_servo_serial.T">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">T</span></span><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_serial.TMotorManager_servo_serial.T" title="Permalink to this definition">¶</a></dt>
<dd><p>Temperature in Degrees Celsius</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_serial.TMotorManager_servo_serial.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">port</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'/dev/ttyUSB0'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">baud</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">961200</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">motor_params</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{'Curr_max':</span> <span class="pre">15.0,</span> <span class="pre">'Curr_min':</span> <span class="pre">-</span> <span class="pre">15.0,</span> <span class="pre">'GEAR_RATIO':</span> <span class="pre">9,</span> <span class="pre">'Kt':</span> <span class="pre">0.115,</span> <span class="pre">'NUM_POLE_PAIRS':</span> <span class="pre">21,</span> <span class="pre">'P_max':</span> <span class="pre">58.85,</span> <span class="pre">'P_min':</span> <span class="pre">-</span> <span class="pre">58.85,</span> <span class="pre">'Temp_max':</span> <span class="pre">40.0,</span> <span class="pre">'Type':</span> <span class="pre">'AK80-9',</span> <span class="pre">'V_max':</span> <span class="pre">20.0,</span> <span class="pre">'V_min':</span> <span class="pre">-</span> <span class="pre">20.0}</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_serial.TMotorManager_servo_serial.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize the motor manager. Note that this will not turn on the motor,
until __enter__ is called (automatically called in a with block)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>port</strong> – the name of the serial port to connect to (ie, /dev/ttyUSB0, COM3, etc)</p></li>
<li><p><strong>baud</strong> – the baud rate to use for connection. Should always be 961200 as far as I can tell.</p></li>
<li><p><strong>motor_params</strong> – A parameter dictionary defining the motor parameters, as defined above.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_serial.TMotorManager_servo_serial._send_specific_command">
<span class="sig-name descname"><span class="pre">_send_specific_command</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">command</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_serial.TMotorManager_servo_serial._send_specific_command" title="Permalink to this definition">¶</a></dt>
<dd><p>Sends the specified command rather than the current value of &lt;this object&gt;._command</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>command</strong> – bytearray with the command to send.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_serial.TMotorManager_servo_serial.begin_position_feedback">
<span class="sig-name descname"><span class="pre">begin_position_feedback</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">set_command</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_serial.TMotorManager_servo_serial.begin_position_feedback" title="Permalink to this definition">¶</a></dt>
<dd><p>Tell the motor to send back its current position every 10ms</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>set_command</strong> – set the TMotorManager’s current command to this if True</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The command as a bytearray</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_serial.TMotorManager_servo_serial.check_connection">
<span class="sig-name descname"><span class="pre">check_connection</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_serial.TMotorManager_servo_serial.check_connection" title="Permalink to this definition">¶</a></dt>
<dd><p>For now, just sends some parameter read commands and waits 0.2 seconds to
see if we got a response.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_serial.TMotorManager_servo_serial.device_info_string">
<span class="sig-name descname"><span class="pre">device_info_string</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_serial.TMotorManager_servo_serial.device_info_string" title="Permalink to this definition">¶</a></dt>
<dd><p>Prints the motor’s serial port and device type.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_serial.TMotorManager_servo_serial.enter_current_loop_control">
<span class="sig-name descname"><span class="pre">enter_current_loop_control</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_serial.TMotorManager_servo_serial.enter_current_loop_control" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the control state to CURENT_LOOP
In this mode, you can send an Iq current to motor, the motor output torque = Iq <a href="#id10"><span class="problematic" id="id11">*</span></a>KT, so it can
be used as a torque loop</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_serial.TMotorManager_servo_serial.enter_duty_cycle_control">
<span class="sig-name descname"><span class="pre">enter_duty_cycle_control</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_serial.TMotorManager_servo_serial.enter_duty_cycle_control" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the control state to DUTY_CYCLE
In this mode, you can send a certain duty cycle voltage to motor</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_serial.TMotorManager_servo_serial.enter_idle_mode">
<span class="sig-name descname"><span class="pre">enter_idle_mode</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_serial.TMotorManager_servo_serial.enter_idle_mode" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the control state to IDLE and current command to none.
In this mode, no command will be sent.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_serial.TMotorManager_servo_serial.enter_position_control">
<span class="sig-name descname"><span class="pre">enter_position_control</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_serial.TMotorManager_servo_serial.enter_position_control" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the control state to POSITION
In this mode, you can send a certain position to motor, the motor will run to the specified
position, (default speed 12000erpm acceleration 40000erpm)</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_serial.TMotorManager_servo_serial.enter_position_velocity_control">
<span class="sig-name descname"><span class="pre">enter_position_velocity_control</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_serial.TMotorManager_servo_serial.enter_position_velocity_control" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the control state to POSITION_VELOCITY
In this mode, you can send a certain position, speed and acceleration to motor.
The motor will run at a given acceleration and maximum speed to a specified
position.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_serial.TMotorManager_servo_serial.enter_velocity_control">
<span class="sig-name descname"><span class="pre">enter_velocity_control</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_serial.TMotorManager_servo_serial.enter_velocity_control" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the control state to VELOCITY
In this mode, you can send a certain motion speed to motor</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_serial.TMotorManager_servo_serial.error">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">error</span></span><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_serial.TMotorManager_servo_serial.error" title="Permalink to this definition">¶</a></dt>
<dd><p>Motor error code. 0 means no error.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_serial.TMotorManager_servo_serial.get_current_bus_amps">
<span class="sig-name descname"><span class="pre">get_current_bus_amps</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_serial.TMotorManager_servo_serial.get_current_bus_amps" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns:
The most recently updated qaxis current in amps</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_serial.TMotorManager_servo_serial.get_current_daxis_amps">
<span class="sig-name descname"><span class="pre">get_current_daxis_amps</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_serial.TMotorManager_servo_serial.get_current_daxis_amps" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns:
The most recently updated qaxis current in amps</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_serial.TMotorManager_servo_serial.get_current_qaxis_amps">
<span class="sig-name descname"><span class="pre">get_current_qaxis_amps</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_serial.TMotorManager_servo_serial.get_current_qaxis_amps" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns:
The most recently updated qaxis current in amps</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_serial.TMotorManager_servo_serial.get_motor_acceleration_radians_per_second_squared">
<span class="sig-name descname"><span class="pre">get_motor_acceleration_radians_per_second_squared</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_serial.TMotorManager_servo_serial.get_motor_acceleration_radians_per_second_squared" title="Permalink to this definition">¶</a></dt>
<dd><p>Wrapper for get_output_acceleration that accounts for gear ratio to get motor-side acceleration</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The most recently updated motor-side acceleration in rad/s/s.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_serial.TMotorManager_servo_serial.get_motor_angle_radians">
<span class="sig-name descname"><span class="pre">get_motor_angle_radians</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_serial.TMotorManager_servo_serial.get_motor_angle_radians" title="Permalink to this definition">¶</a></dt>
<dd><p>Wrapper for get_output_angle that accounts for gear ratio to get motor-side angle</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The most recently updated motor-side angle in rad.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_serial.TMotorManager_servo_serial.get_motor_error_code">
<span class="sig-name descname"><span class="pre">get_motor_error_code</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_serial.TMotorManager_servo_serial.get_motor_error_code" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns:
The most recently updated motor error code.
Note the program should throw a runtime error before you get a chance to read
this value if it is ever anything besides 0.</p>
<dl class="simple">
<dt>Codes:</dt><dd><p>0  : ‘FAULT_CODE_NONE’
1  : ‘FAULT_CODE_OVER_VOLTAGE’
2  : ‘FAULT_CODE_UNDER_VOLTAGE’
3  : ‘FAULT_CODE_DRIVE’
4  : ‘FAULT_CODE_ABS_OVER_CURRENT’
5  : ‘FAULT_CODE_OVER_TEMP_FET’
6  : ‘FAULT_CODE_OVER_TEMP_MOTOR’
7  : ‘FAULT_CODE_GATE_DRIVER_OVER_VOLTAGE’
8  : ‘FAULT_CODE_GATE_DRIVER_UNDER_VOLTAGE’
9  : ‘FAULT_CODE_MCU_UNDER_VOLTAGE’
10 : ‘FAULT_CODE_BOOTING_FROM_WATCHDOG_RESET’
11 : ‘FAULT_CODE_ENCODER_SPI’
12 : ‘FAULT_CODE_ENCODER_SINCOS_BELOW_MIN_AMPLITUDE’
13 : ‘FAULT_CODE_ENCODER_SINCOS_ABOVE_MAX_AMPLITUDE’
14 : ‘FAULT_CODE_FLASH_CORRUPTION’
15 : ‘FAULT_CODE_HIGH_OFFSET_CURRENT_SENSOR_1’
16 : ‘FAULT_CODE_HIGH_OFFSET_CURRENT_SENSOR_2’
17 : ‘FAULT_CODE_HIGH_OFFSET_CURRENT_SENSOR_3’
18 : ‘FAULT_CODE_UNBALANCED_CURRENTS’</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_serial.TMotorManager_servo_serial.get_motor_parameters">
<span class="sig-name descname"><span class="pre">get_motor_parameters</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">set_command</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_serial.TMotorManager_servo_serial.get_motor_parameters" title="Permalink to this definition">¶</a></dt>
<dd><p>Request the current motor parameters</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>set_command</strong> – set the TMotorManager’s current command to this if True</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The command as a bytearray</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_serial.TMotorManager_servo_serial.get_motor_torque_newton_meters">
<span class="sig-name descname"><span class="pre">get_motor_torque_newton_meters</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_serial.TMotorManager_servo_serial.get_motor_torque_newton_meters" title="Permalink to this definition">¶</a></dt>
<dd><p>Wrapper for get_output_torque that accounts for gear ratio to get motor-side torque</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The most recently updated motor-side torque in Nm.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_serial.TMotorManager_servo_serial.get_motor_velocity_radians_per_second">
<span class="sig-name descname"><span class="pre">get_motor_velocity_radians_per_second</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_serial.TMotorManager_servo_serial.get_motor_velocity_radians_per_second" title="Permalink to this definition">¶</a></dt>
<dd><p>Wrapper for get_output_velocity that accounts for gear ratio to get motor-side velocity</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The most recently updated motor-side velocity in rad/s.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_serial.TMotorManager_servo_serial.get_output_acceleration_radians_per_second_squared">
<span class="sig-name descname"><span class="pre">get_output_acceleration_radians_per_second_squared</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_serial.TMotorManager_servo_serial.get_output_acceleration_radians_per_second_squared" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The most recently updated output acceleration in radians per second per second</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_serial.TMotorManager_servo_serial.get_output_angle_radians">
<span class="sig-name descname"><span class="pre">get_output_angle_radians</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_serial.TMotorManager_servo_serial.get_output_angle_radians" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns:
The most recently updated output angle in radians</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_serial.TMotorManager_servo_serial.get_output_torque_newton_meters">
<span class="sig-name descname"><span class="pre">get_output_torque_newton_meters</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_serial.TMotorManager_servo_serial.get_output_torque_newton_meters" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>the most recently updated output torque in Nm</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_serial.TMotorManager_servo_serial.get_output_velocity_radians_per_second">
<span class="sig-name descname"><span class="pre">get_output_velocity_radians_per_second</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_serial.TMotorManager_servo_serial.get_output_velocity_radians_per_second" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The most recently updated output velocity in radians per second</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_serial.TMotorManager_servo_serial.get_temperature_celsius">
<span class="sig-name descname"><span class="pre">get_temperature_celsius</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_serial.TMotorManager_servo_serial.get_temperature_celsius" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns:
The most recently updated motor temperature in degrees C.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_serial.TMotorManager_servo_serial.get_voltage_bus_volts">
<span class="sig-name descname"><span class="pre">get_voltage_bus_volts</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_serial.TMotorManager_servo_serial.get_voltage_bus_volts" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns:
The most recently updated input voltage in volts</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_serial.TMotorManager_servo_serial.get_voltage_daxis_volts">
<span class="sig-name descname"><span class="pre">get_voltage_daxis_volts</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_serial.TMotorManager_servo_serial.get_voltage_daxis_volts" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns:
The most recently updated daxis voltage in volts</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_serial.TMotorManager_servo_serial.get_voltage_qaxis_volts">
<span class="sig-name descname"><span class="pre">get_voltage_qaxis_volts</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_serial.TMotorManager_servo_serial.get_voltage_qaxis_volts" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns:
The most recently updated qaxis voltage in volts</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_serial.TMotorManager_servo_serial.ibus">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">ibus</span></span><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_serial.TMotorManager_servo_serial.ibus" title="Permalink to this definition">¶</a></dt>
<dd><p>Bus input current in amps</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_serial.TMotorManager_servo_serial.id">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">id</span></span><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_serial.TMotorManager_servo_serial.id" title="Permalink to this definition">¶</a></dt>
<dd><p>D-axis current in amps</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_serial.TMotorManager_servo_serial.iq">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">iq</span></span><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_serial.TMotorManager_servo_serial.iq" title="Permalink to this definition">¶</a></dt>
<dd><p>Q-axis current in amps</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_serial.TMotorManager_servo_serial.parse_motor_parameters_async">
<span class="sig-name descname"><span class="pre">parse_motor_parameters_async</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_serial.TMotorManager_servo_serial.parse_motor_parameters_async" title="Permalink to this definition">¶</a></dt>
<dd><p>Update this motor’s asynch state (except position) based on received data</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>data</strong> – The data array to parse the parameters from</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_serial.TMotorManager_servo_serial.parse_position_feedback_async">
<span class="sig-name descname"><span class="pre">parse_position_feedback_async</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_serial.TMotorManager_servo_serial.parse_position_feedback_async" title="Permalink to this definition">¶</a></dt>
<dd><p>Update this motor’s asynch position based on recieved data</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>data</strong> – The data array to parse the position from.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_serial.TMotorManager_servo_serial.power_off">
<span class="sig-name descname"><span class="pre">power_off</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_serial.TMotorManager_servo_serial.power_off" title="Permalink to this definition">¶</a></dt>
<dd><p>There is no official power off command that I can see, so this will
set the duty cycle to 0.0</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_serial.TMotorManager_servo_serial.power_on">
<span class="sig-name descname"><span class="pre">power_on</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_serial.TMotorManager_servo_serial.power_on" title="Permalink to this definition">¶</a></dt>
<dd><p>Send the startup sequence command. Not sure why it’s like this, but the
command is [0x40, 0x80, 0x20, 0x02, 0x21, 0xc0]</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_serial.TMotorManager_servo_serial.send_command">
<span class="sig-name descname"><span class="pre">send_command</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_serial.TMotorManager_servo_serial.send_command" title="Permalink to this definition">¶</a></dt>
<dd><p>Sends the current command that the user has specified.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_serial.TMotorManager_servo_serial.set_current_loop">
<span class="sig-name descname"><span class="pre">set_current_loop</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">current</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">set_command</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_serial.TMotorManager_servo_serial.set_current_loop" title="Permalink to this definition">¶</a></dt>
<dd><p>send am Iq current to motor, the motor output torque = Iq <a href="#id12"><span class="problematic" id="id13">*</span></a>KT, so it can
be used as a torque loop</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>current</strong> – q axis current to use in A, sign denotes direction</p></li>
<li><p><strong>set_command</strong> – set the TMotorManager’s current command to this if True</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The command as a bytearray</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_serial.TMotorManager_servo_serial.set_duty_cycle">
<span class="sig-name descname"><span class="pre">set_duty_cycle</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">duty</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">set_command</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_serial.TMotorManager_servo_serial.set_duty_cycle" title="Permalink to this definition">¶</a></dt>
<dd><p>send a certain duty cycle voltage to motor</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>duty</strong> – -1.0 to 1.0 duty cycle to use</p></li>
<li><p><strong>set_command</strong> – set the TMotorManager’s current command to this if True</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The command as a bytearray</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_serial.TMotorManager_servo_serial.set_duty_cycle_percent">
<span class="sig-name descname"><span class="pre">set_duty_cycle_percent</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">duty</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_serial.TMotorManager_servo_serial.set_duty_cycle_percent" title="Permalink to this definition">¶</a></dt>
<dd><p>Update the current command to the desired duty cycle.
Note, this does not send a command, it updates the TMotorManager’s saved command,
which will be sent when update() is called.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>duty</strong> – The desired duty cycle -1.0 to 1.0</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_serial.TMotorManager_servo_serial.set_motor_angle_radians">
<span class="sig-name descname"><span class="pre">set_motor_angle_radians</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pos</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_serial.TMotorManager_servo_serial.set_motor_angle_radians" title="Permalink to this definition">¶</a></dt>
<dd><p>Wrapper for set_output_angle that accounts for gear ratio to control motor-side angle</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>pos</strong> – The desired motor-side position in rad.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_serial.TMotorManager_servo_serial.set_motor_current_qaxis_amps">
<span class="sig-name descname"><span class="pre">set_motor_current_qaxis_amps</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">curr</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_serial.TMotorManager_servo_serial.set_motor_current_qaxis_amps" title="Permalink to this definition">¶</a></dt>
<dd><p>Update the current command to the desired current.
Note, this does not send a command, it updates the TMotorManager’s saved command,
which will be sent when update() is called.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>curr</strong> – The desired q-axis current in A</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_serial.TMotorManager_servo_serial.set_motor_parameter_return_format_all">
<span class="sig-name descname"><span class="pre">set_motor_parameter_return_format_all</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">set_command</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_serial.TMotorManager_servo_serial.set_motor_parameter_return_format_all" title="Permalink to this definition">¶</a></dt>
<dd><p>Tell the motor to send back all possible fields when an update is requested.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>set_command</strong> – set the TMotorManager’s current command to this if True</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The command as a bytearray</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_serial.TMotorManager_servo_serial.set_motor_torque_newton_meters">
<span class="sig-name descname"><span class="pre">set_motor_torque_newton_meters</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">torque</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_serial.TMotorManager_servo_serial.set_motor_torque_newton_meters" title="Permalink to this definition">¶</a></dt>
<dd><p>Version of set_output_torque that accounts for gear ratio to control motor-side torque</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>torque</strong> – The desired motor-side torque in Nm.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_serial.TMotorManager_servo_serial.set_motor_velocity_radians_per_second">
<span class="sig-name descname"><span class="pre">set_motor_velocity_radians_per_second</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">vel</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_serial.TMotorManager_servo_serial.set_motor_velocity_radians_per_second" title="Permalink to this definition">¶</a></dt>
<dd><p>Wrapper for set_output_velocity that accounts for gear ratio to control motor-side velocity</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>vel</strong> – The desired motor-side velocity in rad/s.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_serial.TMotorManager_servo_serial.set_multi_turn">
<span class="sig-name descname"><span class="pre">set_multi_turn</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">set_command</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_serial.TMotorManager_servo_serial.set_multi_turn" title="Permalink to this definition">¶</a></dt>
<dd><p>Tell the motor to operate in multi-turn mode, rather than being limited to
Just 360 degrees of position feedback.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>set_command</strong> – set the TMotorManager’s current command to this if True</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The command as a bytearray</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_serial.TMotorManager_servo_serial.set_output_angle_radians">
<span class="sig-name descname"><span class="pre">set_output_angle_radians</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pos</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vel</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1000</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">acc</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">500</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_serial.TMotorManager_servo_serial.set_output_angle_radians" title="Permalink to this definition">¶</a></dt>
<dd><p>Update the current command to the desired position.
Note, this does not send a command, it updates the TMotorManager’s saved command,
which will be sent when update() is called.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pos</strong> – The desired output angle in rad</p></li>
<li><p><strong>vel</strong> – The desired speed to get there (when in POSITION_VELOCITY mode)</p></li>
<li><p><strong>acc</strong> – The desired acceleration to get there (when in POSITION_VELOCITY mode)</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_serial.TMotorManager_servo_serial.set_output_torque_newton_meters">
<span class="sig-name descname"><span class="pre">set_output_torque_newton_meters</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">torque</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_serial.TMotorManager_servo_serial.set_output_torque_newton_meters" title="Permalink to this definition">¶</a></dt>
<dd><p>Update the current command to the desired current, based on the requested torque.
Note, this does not send a command, it updates the TMotorManager’s saved command,
which will be sent when update() is called.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>torque</strong> – The desired output torque in Nm.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_serial.TMotorManager_servo_serial.set_output_velocity_radians_per_second">
<span class="sig-name descname"><span class="pre">set_output_velocity_radians_per_second</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">vel</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_serial.TMotorManager_servo_serial.set_output_velocity_radians_per_second" title="Permalink to this definition">¶</a></dt>
<dd><p>Update the current command to the desired velocity.
Note, this does not send a command, it updates the TMotorManager’s saved command,
which will be sent when update() is called.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>vel</strong> – The desired output speed in rad/s</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_serial.TMotorManager_servo_serial.set_position">
<span class="sig-name descname"><span class="pre">set_position</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pos</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">set_command</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_serial.TMotorManager_servo_serial.set_position" title="Permalink to this definition">¶</a></dt>
<dd><p>send a certain position to motor, the motor will run to the specified
position, (default speed 12000erpm acceleration 40000erpm)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pos</strong> – Desired position in degrees</p></li>
<li><p><strong>set_command</strong> – set the TMotorManager’s current command to this if True</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The command as a bytearray</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_serial.TMotorManager_servo_serial.set_position_velocity">
<span class="sig-name descname"><span class="pre">set_position_velocity</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pos</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vel</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">acc</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">set_command</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_serial.TMotorManager_servo_serial.set_position_velocity" title="Permalink to this definition">¶</a></dt>
<dd><p>send a certain position, speed and acceleration to motor.
The motor will run at a given acceleration and maximum speed to a specified
position.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pos</strong> – Desired position in degrees</p></li>
<li><p><strong>vel</strong> – Desired speed in ERPM</p></li>
<li><p><strong>acc</strong> – Desired acceleration in ERPM/minute? TODO verify this</p></li>
<li><p><strong>set_command</strong> – set the TMotorManager’s current command to this if True</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The command as a bytearray</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_serial.TMotorManager_servo_serial.set_speed_ERPM">
<span class="sig-name descname"><span class="pre">set_speed_ERPM</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">speed</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">set_command</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_serial.TMotorManager_servo_serial.set_speed_ERPM" title="Permalink to this definition">¶</a></dt>
<dd><p>send a certain motion speed to motor</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>speed</strong> – speed to use in ERPM, sign denotes direction</p></li>
<li><p><strong>set_command</strong> – set the TMotorManager’s current command to this if True</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The command as a bytearray</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_serial.TMotorManager_servo_serial.set_zero_position">
<span class="sig-name descname"><span class="pre">set_zero_position</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">set_command</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_serial.TMotorManager_servo_serial.set_zero_position" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the current position of the motor to be the new zero position.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>set_command</strong> – set the TMotorManager’s current command to this if True</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The command as a bytearray</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_serial.TMotorManager_servo_serial.update">
<span class="sig-name descname"><span class="pre">update</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_serial.TMotorManager_servo_serial.update" title="Permalink to this definition">¶</a></dt>
<dd><p>Synchronizes the current motor state with the asynchronously updated state.
Sends the current motor command
Sends the command to get parameter feedback</p>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>RuntimeError</strong> – if this method is called before the motor is entered.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_serial.TMotorManager_servo_serial.update_async">
<span class="sig-name descname"><span class="pre">update_async</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_serial.TMotorManager_servo_serial.update_async" title="Permalink to this definition">¶</a></dt>
<dd><p>Update the asynchronous motor state. Called by a reader thread.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>data</strong> – An array of N bytes of data to parse, [packet id, data_1, …, data_N]</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>RuntimeError</strong> – If the packet recieved contains an error code.</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_serial.TMotorManager_servo_serial.vbus">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">vbus</span></span><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_serial.TMotorManager_servo_serial.vbus" title="Permalink to this definition">¶</a></dt>
<dd><p>Bus input voltage in volts</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_serial.TMotorManager_servo_serial.vd">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">vd</span></span><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_serial.TMotorManager_servo_serial.vd" title="Permalink to this definition">¶</a></dt>
<dd><p>D-axis voltage in volts</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_serial.TMotorManager_servo_serial.vq">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">vq</span></span><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_serial.TMotorManager_servo_serial.vq" title="Permalink to this definition">¶</a></dt>
<dd><p>Q-axis voltage in volts</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_serial.TMotorManager_servo_serial.">
<span id="TMotorCANControl.TMotorManager_servo_serial.TMotorManager_servo_serial.θ"></span><em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">θ</span></span><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_serial.TMotorManager_servo_serial." title="Permalink to this definition">¶</a></dt>
<dd><p>Output angle in rad</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_serial.TMotorManager_servo_serial.d">
<span id="TMotorCANControl.TMotorManager_servo_serial.TMotorManager_servo_serial.θd"></span><em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">θd</span></span><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_serial.TMotorManager_servo_serial.d" title="Permalink to this definition">¶</a></dt>
<dd><p>Output velocity in rad/s</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_serial.TMotorManager_servo_serial.dd">
<span id="TMotorCANControl.TMotorManager_servo_serial.TMotorManager_servo_serial.θdd"></span><em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">θdd</span></span><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_serial.TMotorManager_servo_serial.dd" title="Permalink to this definition">¶</a></dt>
<dd><p>Output acceleration in rad/s/s</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="id14">
<span id="TMotorCANControl.TMotorManager_servo_serial.TMotorManager_servo_serial.τ"></span><em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">τ</span></span><a class="headerlink" href="#id14" title="Permalink to this definition">¶</a></dt>
<dd><p>Output torque in Nm</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_serial.TMotorManager_servo_serial.m">
<span id="TMotorCANControl.TMotorManager_servo_serial.TMotorManager_servo_serial.τm"></span><em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">τm</span></span><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_serial.TMotorManager_servo_serial.m" title="Permalink to this definition">¶</a></dt>
<dd><p>Motor-side torque in Nm</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="id15">
<span id="TMotorCANControl.TMotorManager_servo_serial.TMotorManager_servo_serial.φ"></span><em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">φ</span></span><a class="headerlink" href="#id15" title="Permalink to this definition">¶</a></dt>
<dd><p>Motor-side angle in rad</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="id16">
<span id="TMotorCANControl.TMotorManager_servo_serial.TMotorManager_servo_serial.φd"></span><em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">φd</span></span><a class="headerlink" href="#id16" title="Permalink to this definition">¶</a></dt>
<dd><p>Motor-side velocity in rad/s</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="id17">
<span id="TMotorCANControl.TMotorManager_servo_serial.TMotorManager_servo_serial.φdd"></span><em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">φdd</span></span><a class="headerlink" href="#id17" title="Permalink to this definition">¶</a></dt>
<dd><p>Motor-side acceleration in rad/s/s</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_serial.buffer_append_int16">
<span class="sig-prename descclassname"><span class="pre">TMotorCANControl.TMotorManager_servo_serial.</span></span><span class="sig-name descname"><span class="pre">buffer_append_int16</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">buffer</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">number</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_serial.buffer_append_int16" title="Permalink to this definition">¶</a></dt>
<dd><p>split a 16 bit signed integer into 2 bytes and append to buffer.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>Buffer</strong> – memory allocated to store data.</p></li>
<li><p><strong>number</strong> – value.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_serial.buffer_append_int32">
<span class="sig-prename descclassname"><span class="pre">TMotorCANControl.TMotorManager_servo_serial.</span></span><span class="sig-name descname"><span class="pre">buffer_append_int32</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">buffer</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">number</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_serial.buffer_append_int32" title="Permalink to this definition">¶</a></dt>
<dd><p>split a 32 bit signed integer into 4 bytes and append to buffer.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>Buffer</strong> – memory allocated to store data.</p></li>
<li><p><strong>number</strong> – value.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_serial.buffer_append_int64">
<span class="sig-prename descclassname"><span class="pre">TMotorCANControl.TMotorManager_servo_serial.</span></span><span class="sig-name descname"><span class="pre">buffer_append_int64</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">buffer</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">number</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_serial.buffer_append_int64" title="Permalink to this definition">¶</a></dt>
<dd><p>split a 64 bit signed integer into 8 bytes and append to buffer.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>Buffer</strong> – memory allocated to store data.</p></li>
<li><p><strong>number</strong> – value.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_serial.buffer_append_uint16">
<span class="sig-prename descclassname"><span class="pre">TMotorCANControl.TMotorManager_servo_serial.</span></span><span class="sig-name descname"><span class="pre">buffer_append_uint16</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">buffer</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">number</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_serial.buffer_append_uint16" title="Permalink to this definition">¶</a></dt>
<dd><p>split a 16 bit unsigned integer into 2 bytes and append to buffer.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>Buffer</strong> – memory allocated to store data.</p></li>
<li><p><strong>number</strong> – value.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_serial.buffer_append_uint32">
<span class="sig-prename descclassname"><span class="pre">TMotorCANControl.TMotorManager_servo_serial.</span></span><span class="sig-name descname"><span class="pre">buffer_append_uint32</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">buffer</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">number</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_serial.buffer_append_uint32" title="Permalink to this definition">¶</a></dt>
<dd><p>split a 32 bit unsigned integer into 4 bytes and append to buffer.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>Buffer</strong> – memory allocated to store data.</p></li>
<li><p><strong>number</strong> – value.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_serial.buffer_append_uint64">
<span class="sig-prename descclassname"><span class="pre">TMotorCANControl.TMotorManager_servo_serial.</span></span><span class="sig-name descname"><span class="pre">buffer_append_uint64</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">buffer</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">number</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_serial.buffer_append_uint64" title="Permalink to this definition">¶</a></dt>
<dd><p>split a 64 bit unsigned integer into 8 bytes and append to buffer.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>Buffer</strong> – memory allocated to store data.</p></li>
<li><p><strong>number</strong> – value.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_serial.buffer_get_int16">
<span class="sig-prename descclassname"><span class="pre">TMotorCANControl.TMotorManager_servo_serial.</span></span><span class="sig-name descname"><span class="pre">buffer_get_int16</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">buffer</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ind</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_serial.buffer_get_int16" title="Permalink to this definition">¶</a></dt>
<dd><p>Grab the 16 bit integer at data[ind:ind+1]</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>buffer</strong> – array with bytes of data</p></li>
<li><p><strong>ind</strong> – location to index</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>ind+1]</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>16 bit integer at data[ind</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_serial.buffer_get_int32">
<span class="sig-prename descclassname"><span class="pre">TMotorCANControl.TMotorManager_servo_serial.</span></span><span class="sig-name descname"><span class="pre">buffer_get_int32</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">buffer</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ind</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_serial.buffer_get_int32" title="Permalink to this definition">¶</a></dt>
<dd><p>Grab the 32 bit integer at data[ind:ind+3]</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>buffer</strong> – array with bytes of data</p></li>
<li><p><strong>ind</strong> – location to index</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>ind+3]</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>32-bit signed integer at data[ind</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_serial.buffer_get_int8">
<span class="sig-prename descclassname"><span class="pre">TMotorCANControl.TMotorManager_servo_serial.</span></span><span class="sig-name descname"><span class="pre">buffer_get_int8</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">buffer</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ind</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_serial.buffer_get_int8" title="Permalink to this definition">¶</a></dt>
<dd><p>Grab the 8 bit integer at data[ind]</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>buffer</strong> – array with bytes of data</p></li>
<li><p><strong>ind</strong> – location to index</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>8 bit integer at data[ind]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_serial.crc16">
<span class="sig-prename descclassname"><span class="pre">TMotorCANControl.TMotorManager_servo_serial.</span></span><span class="sig-name descname"><span class="pre">crc16</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">DL</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_serial.crc16" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the crc16 value for the given data array and data length.
This is just translated to python from the C code in the manual on the cubmars website.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> – array of data to creat checksum value for</p></li>
<li><p><strong>DL</strong> – data length</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>16-bit integer checksum.</p>
</dd>
</dl>
</dd></dl>

<dl class="py data">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_serial.crc16_tab">
<span class="sig-prename descclassname"><span class="pre">TMotorCANControl.TMotorManager_servo_serial.</span></span><span class="sig-name descname"><span class="pre">crc16_tab</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">[0,</span> <span class="pre">4129,</span> <span class="pre">8258,</span> <span class="pre">12387,</span> <span class="pre">16516,</span> <span class="pre">20645,</span> <span class="pre">24774,</span> <span class="pre">28903,</span> <span class="pre">33032,</span> <span class="pre">37161,</span> <span class="pre">41290,</span> <span class="pre">45419,</span> <span class="pre">49548,</span> <span class="pre">53677,</span> <span class="pre">57806,</span> <span class="pre">61935,</span> <span class="pre">4657,</span> <span class="pre">528,</span> <span class="pre">12915,</span> <span class="pre">8786,</span> <span class="pre">21173,</span> <span class="pre">17044,</span> <span class="pre">29431,</span> <span class="pre">25302,</span> <span class="pre">37689,</span> <span class="pre">33560,</span> <span class="pre">45947,</span> <span class="pre">41818,</span> <span class="pre">54205,</span> <span class="pre">50076,</span> <span class="pre">62463,</span> <span class="pre">58334,</span> <span class="pre">9314,</span> <span class="pre">13379,</span> <span class="pre">1056,</span> <span class="pre">5121,</span> <span class="pre">25830,</span> <span class="pre">29895,</span> <span class="pre">17572,</span> <span class="pre">21637,</span> <span class="pre">42346,</span> <span class="pre">46411,</span> <span class="pre">34088,</span> <span class="pre">38153,</span> <span class="pre">58862,</span> <span class="pre">62927,</span> <span class="pre">50604,</span> <span class="pre">54669,</span> <span class="pre">13907,</span> <span class="pre">9842,</span> <span class="pre">5649,</span> <span class="pre">1584,</span> <span class="pre">30423,</span> <span class="pre">26358,</span> <span class="pre">22165,</span> <span class="pre">18100,</span> <span class="pre">46939,</span> <span class="pre">42874,</span> <span class="pre">38681,</span> <span class="pre">34616,</span> <span class="pre">63455,</span> <span class="pre">59390,</span> <span class="pre">55197,</span> <span class="pre">51132,</span> <span class="pre">18628,</span> <span class="pre">22757,</span> <span class="pre">26758,</span> <span class="pre">30887,</span> <span class="pre">2112,</span> <span class="pre">6241,</span> <span class="pre">10242,</span> <span class="pre">14371,</span> <span class="pre">51660,</span> <span class="pre">55789,</span> <span class="pre">59790,</span> <span class="pre">63919,</span> <span class="pre">35144,</span> <span class="pre">39273,</span> <span class="pre">43274,</span> <span class="pre">47403,</span> <span class="pre">23285,</span> <span class="pre">19156,</span> <span class="pre">31415,</span> <span class="pre">27286,</span> <span class="pre">6769,</span> <span class="pre">2640,</span> <span class="pre">14899,</span> <span class="pre">10770,</span> <span class="pre">56317,</span> <span class="pre">52188,</span> <span class="pre">64447,</span> <span class="pre">60318,</span> <span class="pre">39801,</span> <span class="pre">35672,</span> <span class="pre">47931,</span> <span class="pre">43802,</span> <span class="pre">27814,</span> <span class="pre">31879,</span> <span class="pre">19684,</span> <span class="pre">23749,</span> <span class="pre">11298,</span> <span class="pre">15363,</span> <span class="pre">3168,</span> <span class="pre">7233,</span> <span class="pre">60846,</span> <span class="pre">64911,</span> <span class="pre">52716,</span> <span class="pre">56781,</span> <span class="pre">44330,</span> <span class="pre">48395,</span> <span class="pre">36200,</span> <span class="pre">40265,</span> <span class="pre">32407,</span> <span class="pre">28342,</span> <span class="pre">24277,</span> <span class="pre">20212,</span> <span class="pre">15891,</span> <span class="pre">11826,</span> <span class="pre">7761,</span> <span class="pre">3696,</span> <span class="pre">65439,</span> <span class="pre">61374,</span> <span class="pre">57309,</span> <span class="pre">53244,</span> <span class="pre">48923,</span> <span class="pre">44858,</span> <span class="pre">40793,</span> <span class="pre">36728,</span> <span class="pre">37256,</span> <span class="pre">33193,</span> <span class="pre">45514,</span> <span class="pre">41451,</span> <span class="pre">53516,</span> <span class="pre">49453,</span> <span class="pre">61774,</span> <span class="pre">57711,</span> <span class="pre">4224,</span> <span class="pre">161,</span> <span class="pre">12482,</span> <span class="pre">8419,</span> <span class="pre">20484,</span> <span class="pre">16421,</span> <span class="pre">28742,</span> <span class="pre">24679,</span> <span class="pre">33721,</span> <span class="pre">37784,</span> <span class="pre">41979,</span> <span class="pre">46042,</span> <span class="pre">49981,</span> <span class="pre">54044,</span> <span class="pre">58239,</span> <span class="pre">62302,</span> <span class="pre">689,</span> <span class="pre">4752,</span> <span class="pre">8947,</span> <span class="pre">13010,</span> <span class="pre">16949,</span> <span class="pre">21012,</span> <span class="pre">25207,</span> <span class="pre">29270,</span> <span class="pre">46570,</span> <span class="pre">42443,</span> <span class="pre">38312,</span> <span class="pre">34185,</span> <span class="pre">62830,</span> <span class="pre">58703,</span> <span class="pre">54572,</span> <span class="pre">50445,</span> <span class="pre">13538,</span> <span class="pre">9411,</span> <span class="pre">5280,</span> <span class="pre">1153,</span> <span class="pre">29798,</span> <span class="pre">25671,</span> <span class="pre">21540,</span> <span class="pre">17413,</span> <span class="pre">42971,</span> <span class="pre">47098,</span> <span class="pre">34713,</span> <span class="pre">38840,</span> <span class="pre">59231,</span> <span class="pre">63358,</span> <span class="pre">50973,</span> <span class="pre">55100,</span> <span class="pre">9939,</span> <span class="pre">14066,</span> <span class="pre">1681,</span> <span class="pre">5808,</span> <span class="pre">26199,</span> <span class="pre">30326,</span> <span class="pre">17941,</span> <span class="pre">22068,</span> <span class="pre">55628,</span> <span class="pre">51565,</span> <span class="pre">63758,</span> <span class="pre">59695,</span> <span class="pre">39368,</span> <span class="pre">35305,</span> <span class="pre">47498,</span> <span class="pre">43435,</span> <span class="pre">22596,</span> <span class="pre">18533,</span> <span class="pre">30726,</span> <span class="pre">26663,</span> <span class="pre">6336,</span> <span class="pre">2273,</span> <span class="pre">14466,</span> <span class="pre">10403,</span> <span class="pre">52093,</span> <span class="pre">56156,</span> <span class="pre">60223,</span> <span class="pre">64286,</span> <span class="pre">35833,</span> <span class="pre">39896,</span> <span class="pre">43963,</span> <span class="pre">48026,</span> <span class="pre">19061,</span> <span class="pre">23124,</span> <span class="pre">27191,</span> <span class="pre">31254,</span> <span class="pre">2801,</span> <span class="pre">6864,</span> <span class="pre">10931,</span> <span class="pre">14994,</span> <span class="pre">64814,</span> <span class="pre">60687,</span> <span class="pre">56684,</span> <span class="pre">52557,</span> <span class="pre">48554,</span> <span class="pre">44427,</span> <span class="pre">40424,</span> <span class="pre">36297,</span> <span class="pre">31782,</span> <span class="pre">27655,</span> <span class="pre">23652,</span> <span class="pre">19525,</span> <span class="pre">15522,</span> <span class="pre">11395,</span> <span class="pre">7392,</span> <span class="pre">3265,</span> <span class="pre">61215,</span> <span class="pre">65342,</span> <span class="pre">53085,</span> <span class="pre">57212,</span> <span class="pre">44955,</span> <span class="pre">49082,</span> <span class="pre">36825,</span> <span class="pre">40952,</span> <span class="pre">28183,</span> <span class="pre">32310,</span> <span class="pre">20053,</span> <span class="pre">24180,</span> <span class="pre">11923,</span> <span class="pre">16050,</span> <span class="pre">3793,</span> <span class="pre">7920]</span></em><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_serial.crc16_tab" title="Permalink to this definition">¶</a></dt>
<dd><p>CRC 16 table as given in the manual, to be used to verify the packets recived</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_serial.create_packet">
<span class="sig-prename descclassname"><span class="pre">TMotorCANControl.TMotorManager_servo_serial.</span></span><span class="sig-name descname"><span class="pre">create_packet</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_serial.create_packet" title="Permalink to this definition">¶</a></dt>
<dd><p>Packages the data into a packet to be sent.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>data</strong> – array of N+1 bytes of data, [packet id, data_1, …, data_N]</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>array in the format, [0x02, data length, packet id, data_1, …, data_N, crc_1, crc_2, 0x03]</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>packet</p>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_serial.motor_listener">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">TMotorCANControl.TMotorManager_servo_serial.</span></span><span class="sig-name descname"><span class="pre">motor_listener</span></span><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_serial.motor_listener" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">serial.threaded.Protocol</span></code></p>
<p>Implements the pyserial “Protocol” class to handle messages asynchronously
TODO when pyserial implmements asyncio support, switch to that</p>
<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_serial.motor_listener.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_serial.motor_listener.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initializes the class, including the state machine variables and a reference
to the motor manager in the main thread that this class will update.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_serial.motor_listener.connection_lost">
<span class="sig-name descname"><span class="pre">connection_lost</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">transport</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_serial.motor_listener.connection_lost" title="Permalink to this definition">¶</a></dt>
<dd><p>Could add other things to happen here on connection termination.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>transport</strong> – the connection</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_serial.motor_listener.connection_made">
<span class="sig-name descname"><span class="pre">connection_made</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">transport</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_serial.motor_listener.connection_made" title="Permalink to this definition">¶</a></dt>
<dd><p>Could add other things to happen here on connection initialization.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>transport</strong> – the connection</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_serial.motor_listener.data_received">
<span class="sig-name descname"><span class="pre">data_received</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_serial.motor_listener.data_received" title="Permalink to this definition">¶</a></dt>
<dd><p>Handle data that’s been recieved, by stepping through a state machine one byte at a time.
States:</p>
<blockquote>
<div><p>0: expecting 0x02 for beginning of next message
1: expecting data length field
2: will keep reading data until DL + 2
3: expecting 0x03 for ending of this message</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>data</strong> – array of received data to parse</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_serial.motor_listener.handle_packet">
<span class="sig-name descname"><span class="pre">handle_packet</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">packet</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_serial.motor_listener.handle_packet" title="Permalink to this definition">¶</a></dt>
<dd><p>Called whenever the state machine finishes reading a packet,
to update motor manager object.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>packet</strong> – array of data to parse.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_serial.parse_packet">
<span class="sig-prename descclassname"><span class="pre">TMotorCANControl.TMotorManager_servo_serial.</span></span><span class="sig-name descname"><span class="pre">parse_packet</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">packet</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_serial.parse_packet" title="Permalink to this definition">¶</a></dt>
<dd><p>Check that the packet makes sense, and get the data out of it.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>packet</strong> – array in the format [0x02, data length, packet id, data_1, …, data_N, crc_1, crc_2, 0x03]</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Just the packet id and actual data from the recieved packet, [packet id, data_1, …, data_N]
None: returns None if the packet failed to successfully parse</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>data</p>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_serial.servo_serial_motor_state">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">TMotorCANControl.TMotorManager_servo_serial.</span></span><span class="sig-name descname"><span class="pre">servo_serial_motor_state</span></span><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_serial.servo_serial_motor_state" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>An object representing the state of the motor</p>
<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_serial.servo_serial_motor_state.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_serial.servo_serial_motor_state.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize the motor state to zero.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TMotorCANControl.TMotorManager_servo_serial.servo_serial_motor_state.set_state">
<span class="sig-name descname"><span class="pre">set_state</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mos_temperature</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">motor_temperature</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_current</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input_current</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">id_current</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">iq_current</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">duty</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">speed</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input_voltage</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">position_set</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">controlID</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Vd</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Vq</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">error</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">acceleration</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">position</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#TMotorCANControl.TMotorManager_servo_serial.servo_serial_motor_state.set_state" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the motor state based on input to the function. If any field is not specified,
then that field will not be altered.</p>
</dd></dl>

</dd></dl>

</section>
<section id="module-TMotorCANControl">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-TMotorCANControl" title="Permalink to this headline">¶</a></h2>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">TMotorCANControl</a></h1>








<h3>Navigation</h3>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2022, Mitry Anderson.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 4.4.0</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/TMotorCANControl.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>